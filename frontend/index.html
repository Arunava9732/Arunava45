<!DOCTYPE html>
  <html lang="en" itemscope itemtype="https://schema.org/WebPage">
    <head>
      <meta charset="UTF-8">
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <meta name="theme-color" content="#0b0b0b">
      <meta name="mobile-web-app-capable" content="yes">
      <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
      
      <!-- Resource Hinting for Faster Loading -->
      <link rel="preconnect" href="https://fonts.googleapis.com" crossorigin>
      <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
      <link rel="preconnect" href="https://cdnjs.cloudflare.com" crossorigin>
      <link rel="preconnect" href="https://cdn.jsdelivr.net" crossorigin>
      <link rel="dns-prefetch" href="https://fonts.googleapis.com">
      <link rel="dns-prefetch" href="https://cdnjs.cloudflare.com">
      <link rel="dns-prefetch" href="https://cdn.jsdelivr.net">
      <link rel="dns-prefetch" href="https://accounts.google.com">
      <link rel="dns-prefetch" href="https://api.razorpay.com">
      
      <link rel="manifest" href="manifest.json">
      <link rel="apple-touch-icon" href="assets/img/favicon.png">

      <!-- Core API & Auth -->
      <script src="assets/js/auto-debugger.js"></script>
      <script src="assets/js/api.js"></script>
      <script src="assets/js/auth.js"></script>
      <script src="assets/js/state-manager.js"></script>
      
      <!-- AI-Friendly Meta Tags -->
      <meta name="ai-generated" content="false">
      <meta name="machine-readable" content="true">
      <meta name="semantic-web" content="true">
      <meta name="structured-data" content="json-ld">
      <meta name="api-available" content="true">
      <meta name="api-endpoint" content="/api/products">
      
      <!-- Advanced SEO Meta Tags -->
      <title>BLACKONN - Premium Black Clothing & Streetwear | Shop Online India</title>
      <meta name="description" content="Shop premium black clothing at BLACKONN. Discover stylish oversized t-shirts, hoodies, caps, bags & more. Free shipping on orders above â‚¹999. Quality streetwear from Kolkata, India. #BlackFashion #Streetwear">
      <meta name="keywords" content="black clothing, streetwear, oversized t-shirts, hoodies, caps, bags, premium fashion, BLACKONN, India, Kolkata, online shopping, black fashion, minimalist clothing, urban wear, street style, all black everything">
      <meta name="author" content="BLACKONN">
      <meta name="robots" content="index, follow, max-image-preview:large, max-snippet:-1, max-video-preview:-1">
      <meta name="googlebot" content="index, follow">
      <meta name="bingbot" content="index, follow">
      <meta name="rating" content="General">
      <meta name="revisit-after" content="7 days">
      <link rel="canonical" href="https://blackonn.com/">
      
      <!-- Open Graph / Facebook (Enhanced) -->
      <meta property="og:type" content="website">
      <meta property="og:url" content="https://blackonn.com/">
      <meta property="og:title" content="BLACKONN - Premium Black Clothing & Streetwear">
      <meta property="og:description" content="Discover premium black clothing and streetwear. Stylish oversized t-shirts, hoodies, caps & more with free shipping.">
      <meta property="og:image" content="https://blackonn.com/assets/img/BLACKONN 004_page-0001.png">
      <meta property="og:image:width" content="1200">
      <meta property="og:image:height" content="630">
      <meta property="og:image:alt" content="BLACKONN Premium Black Clothing">
      <meta property="og:locale" content="en_IN">
      <meta property="og:site_name" content="BLACKONN">
      <meta property="fb:app_id" content="">
      
      <!-- Twitter Card (Enhanced) -->
      <meta name="twitter:card" content="summary_large_image">
      <meta name="twitter:site" content="@blackonnindia">
      <meta name="twitter:creator" content="@blackonnindia">
      <meta name="twitter:url" content="https://blackonn.com/">
      <meta name="twitter:title" content="BLACKONN - Premium Black Clothing & Streetwear">
      <meta name="twitter:description" content="Shop premium black clothing. Stylish oversized t-shirts, hoodies, caps & more with free shipping.">
      <meta name="twitter:image" content="https://blackonn.com/assets/img/BLACKONN 004_page-0001.png">
      <meta name="twitter:image:alt" content="BLACKONN Premium Black Clothing">
      
      <!-- Enhanced Structured Data - Organization + Store -->
      <!-- Enhanced Structured Data - Organization + Store -->
      <script type="application/ld+json">
      {
        "@context": "https://schema.org",
        "@graph": [
          {
            "@type": "Organization",
            "@id": "https://blackonn.com/#organization",
            "name": "BLACKONN",
            "url": "https://blackonn.com",
            "logo": {
              "@type": "ImageObject",
              "url": "https://blackonn.com/assets/img/favicon.png",
              "width": 512,
              "height": 512
            },
            "description": "Premium black clothing and streetwear brand from Kolkata, India. Offering stylish oversized t-shirts, hoodies, caps, bags and more.",
            "sameAs": [
              "https://www.facebook.com/share/1GhKYo1Bc6/",
              "https://www.instagram.com/blackonnindia",
              "https://wa.me/918420889722"
            ],
            "address": {
              "@type": "PostalAddress",
              "addressLocality": "Kolkata",
              "addressRegion": "West Bengal",
              "addressCountry": "IN",
              "postalCode": "700001"
            },
            "contactPoint": {
              "@type": "ContactPoint",
              "telephone": "+91-8420889722",
              "contactType": "Customer Service",
              "availableLanguage": ["English", "Hindi", "Bengali"],
              "areaServed": "IN"
            },
            "foundingDate": "2024",
            "founders": [{
              "@type": "Person",
              "name": "BLACKONN Team"
            }]
          },
          {
            "@type": "OnlineStore",
            "@id": "https://blackonn.com/#store",
            "name": "BLACKONN Online Store",
            "url": "https://blackonn.com",
            "image": "https://blackonn.com/assets/img/BLACKONN 004_page-0001.png",
            "description": "Shop premium black clothing and streetwear online. Free shipping on orders above â‚¹999.",
            "priceRange": "â‚¹399-â‚¹1999",
            "currenciesAccepted": "INR",
            "paymentAccepted": ["Cash", "Credit Card", "Debit Card", "UPI", "Net Banking"],
            "hasOfferCatalog": {
              "@type": "OfferCatalog",
              "name": "Black Clothing Collection",
              "itemListElement": [
                {
                  "@type": "Offer",
                  "itemOffered": {
                    "@type": "Product",
                    "name": "Oversized T-Shirts",
                    "category": "Clothing"
                  }
                },
                {
                  "@type": "Offer",
                  "itemOffered": {
                    "@type": "Product",
                    "name": "Hoodies",
                    "category": "Clothing"
                  }
                },
                {
                  "@type": "Offer",
                  "itemOffered": {
                    "@type": "Product",
                    "name": "Caps",
                    "category": "Accessories"
                  }
                },
                {
                  "@type": "Offer",
                  "itemOffered": {
                    "@type": "Product",
                    "name": "Bags",
                    "category": "Accessories"
                  }
                }
              ]
            }
          },
          {
            "@type": "WebSite",
            "@id": "https://blackonn.com/#website",
            "url": "https://blackonn.com",
            "name": "BLACKONN",
            "description": "Premium black clothing and streetwear online store",
            "publisher": {
              "@id": "https://blackonn.com/#organization"
            },
            "potentialAction": {
              "@type": "SearchAction",
              "target": "https://blackonn.com/products?search={search_term_string}",
              "query-input": "required name=search_term_string"
            }
          },
          {
            "@type": "WebPage",
            "@id": "https://blackonn.com/#webpage",
            "url": "https://blackonn.com",
            "name": "BLACKONN - Premium Black Clothing Home",
            "isPartOf": {
              "@id": "https://blackonn.com/#website"
            },
            "about": {
              "@id": "https://blackonn.com/#organization"
            },
            "description": "Discover premium black clothing and streetwear. Shop oversized t-shirts, hoodies, caps, bags and more with free shipping on orders above â‚¹999.",
            "inLanguage": "en-IN"
          }
        ]
      }
      </script>
      
      <!-- BreadcrumbList Structured Data -->
      <script type="application/ld+json">
      {
        "@context": "https://schema.org",
        "@type": "BreadcrumbList",
        "itemListElement": [{
          "@type": "ListItem",
          "position": 1,
          "name": "Home",
          "item": "https://blackonn.com/"
        }]
      }
      </script>
      
      <!-- Structured Data - WebSite (for sitelinks search box) -->
      <script type="application/ld+json">
      {
        "@context": "https://schema.org",
        "@type": "WebSite",
        "name": "BLACKONN",
        "url": "https://blackonn.com",
        "potentialAction": {
          "@type": "SearchAction",
          "target": "https://blackonn.com/products.html?search={search_term_string}",
          "query-input": "required name=search_term_string"
        }
      }
      </script>
      
      <!-- Structured Data - Store -->
      <script type="application/ld+json">
      {
        "@context": "https://schema.org",
        "@type": "ClothingStore",
        "name": "BLACKONN",
        "image": "https://blackonn.com/assets/img/BLACKONN 004_page-0001.png",
        "url": "https://blackonn.com",
        "telephone": "+91-8420889722",
        "email": "hello@blackonn.com",
        "priceRange": "â‚¹â‚¹",
        "address": {
          "@type": "PostalAddress",
          "streetAddress": "Kolkata",
          "addressLocality": "Kolkata",
          "addressRegion": "West Bengal",
          "postalCode": "700001",
          "addressCountry": "IN"
        },
        "openingHoursSpecification": {
          "@type": "OpeningHoursSpecification",
          "dayOfWeek": ["Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday", "Sunday"],
          "opens": "00:00",
          "closes": "23:59"
        },
        "aggregateRating": {
          "@type": "AggregateRating",
          "ratingValue": "4.8",
          "reviewCount": "150"
        }
      }
      </script>
      
      <!-- Structured Data - BreadcrumbList -->
      <script type="application/ld+json">
      {
        "@context": "https://schema.org",
        "@type": "BreadcrumbList",
        "itemListElement": [{
          "@type": "ListItem",
          "position": 1,
          "name": "Home",
          "item": "https://blackonn.com/"
        }]
      }
      </script>
      
      <style>
        html { background: #ffffff; }
        body { background: #ffffff; }
        /* Keep navbar #eef3f8 even when scrolled on home page */
        .nav, .nav.nav-scrolled {
          background: #eef3f8 !important;
          -webkit-backdrop-filter: none !important;
          backdrop-filter: none !important;
        }
        .footer *, .footer *::before, .footer *::after,
        .bottom *, .bottom *::before, .bottom *::after {
          margin: 0;
          padding: 0;
          box-sizing: border-box;
        }
        .cart-count {
          display: none !important;
        }
        .cart-count.show {
          display: flex !important;
        }
        .nav-icons {
          display: none !important;
        }
      </style>
      <link rel="shortcut icon" href="assets/img/favicon.png" type="image/x-icon">
      <!-- High-Priority Resource Hints -->
      <link rel="preconnect" href="https://cdnjs.cloudflare.com">
      <link rel="dns-prefetch" href="https://cdnjs.cloudflare.com">
      <link rel="preconnect" href="https://fonts.googleapis.com">
      <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
      
      <!-- Critical Asset Preloading for LCP (Largest Contentful Paint) -->
      <link rel="preload" href="assets/img/BLACKONN 004_page-0001.png" as="image" fetchpriority="high">
      
      <!-- remixicon icons link -->
      <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/remixicon/3.5.0/remixicon.min.css">
      <link rel="stylesheet" href="assets/css/swiper-bundle.min.css">
      <link rel="stylesheet" href="assets/css/styles.css">
      <title>BLACKONN</title>
    </head>
    <body itemscope itemtype="https://schema.org/WebPage">

    <!-- Premium Glass Hamburger Navbar -->
    <header class="nav" role="banner" itemscope itemtype="https://schema.org/WPHeader">
      <div class="nav-container">
        <div class="logo">
          <a href="index.html" itemprop="url" aria-label="BLACKONN Home">
            <img src="assets/img/BLACKONN 004_page-0001.png" style="width:175px;height:50px; margin-bottom:15px;" alt="BLACKONN Logo - Premium Black Clothing" itemprop="logo" loading="eager" fetchpriority="high">
          </a>
        </div>

        <div class="nav-right" role="navigation" aria-label="User navigation">
          <div class="nav-icons">
            <a href="login.html" class="nav-icon login-icon" id="loginIcon" title="Login" aria-label="Login to your account">
              <i class="ri-user-line" aria-hidden="true"></i>
            </a>
            <a href="cart.html" class="nav-icon cart-icon" id="cartIcon" title="Shopping Cart" aria-label="Shopping cart">
              <i class="ri-shopping-cart-line" aria-hidden="true"></i>
              <span class="cart-count" id="cartCount" role="status" aria-live="polite">0</span>
            </a>
          </div>
          <button class="hamburger" id="menuBtn" aria-label="Open menu">
            <span></span><span></span><span></span>
          </button>
          <span class="hamburger-indicator" id="hamburgerIndicator"></span>
        </div>
      </div>
    </header>
    <!-- Premium Glass Hamburger Navbar End-->

    <!-- Fullscreen Menu -->
    <div class="fullscreen-menu" id="fullMenu">
      <button class="close-menu" id="closeMenu">Ã—</button>
      <ul>
        <li><a href="#shop" aria-label="Shop"><i class="ri-shopping-bag-line"></i></a></li>
        <li id="giftCardMenuItem"><a href="gift-cards.html" aria-label="Gift Cards" title="Gift Cards"><i class="ri-gift-line"></i></a></li>
        <li><a href="#contact" aria-label="Contact information"><i class="ri-information-line"></i></a></li>
        <li><a href="#contact" aria-label="Email"><i class="ri-mail-line"></i></a></li>
        <li><a href="cart.html" title="Shopping Cart" aria-label="Shopping Cart"><i class="ri-shopping-cart-line"></i><span class="cart-count" id="menuCartCount">0</span></a></li>
        <li><a href="login.html" title="Login" aria-label="Login"><i class="ri-user-line"></i></a></li>
      </ul>
    </div>

    <script>
    (async function() {
      try {
        const res = await fetch('/api/marketing/feature-visibility?_=' + Date.now(), { cache: 'no-store' });
        const data = await res.json();
        if (data.success && !data.features.giftCardsEnabled) {
          const el = document.getElementById('giftCardMenuItem');
          if (el) el.style.display = 'none';
        }
      } catch(e) {}
    })();
    </script>

    <script>
            // Auto-logout for all users after 10 minutes of inactivity
            let lastUserActivity = Date.now();
            function resetUserActivityTimer() {
              lastUserActivity = Date.now();
            }
            ['click','mousemove','keydown','scroll','touchstart'].forEach(evt => {
              window.addEventListener(evt, resetUserActivityTimer, true);
            });
            setInterval(() => {
              // Check if user has a token (logged in via API)
              const hasToken = window.blackonnAuth && window.blackonnAuth.hasToken();
              if (hasToken && Date.now() - lastUserActivity > 10 * 60 * 1000) {
                window.blackonnAuth.logout();
                window.location.href = 'login.html';
              }
            }, 10000); // check every 10 seconds
      // Menu Toggle
      const menuBtn = document.getElementById('menuBtn');
      const fullMenu = document.getElementById('fullMenu');
      const closeMenu = document.getElementById('closeMenu');
      const hamburgerIndicator = document.getElementById('hamburgerIndicator');

      menuBtn.addEventListener('click', () => {
        // open menu
        fullMenu.style.display = 'flex';
        fullMenu.classList.remove('closing');
        fullMenu.classList.add('open');
        menuBtn.classList.add('open');
        // Hide hamburger indicator when menu is open
        if (hamburgerIndicator) hamburgerIndicator.classList.remove('show');
      });

      function closeFullMenu(){
        // add closing animation class then hide after animation
        fullMenu.classList.add('closing');
        fullMenu.classList.remove('open');
        // animate hamburger back to closed state with a small closing class
        menuBtn.classList.add('closing');
        menuBtn.classList.remove('open');
        setTimeout(()=>{
          menuBtn.classList.remove('closing');
          fullMenu.style.display = 'none';
          fullMenu.classList.remove('closing');
        }, 350);
      }

      closeMenu.addEventListener('click', closeFullMenu);

      /* Close menu when a link is clicked */
      fullMenu.querySelectorAll('a').forEach(link => {
        link.addEventListener('click', closeFullMenu);
      });

      // Update cart count from API
      async function updateCartCount() {
        const cartCount = document.getElementById('cartCount');
        const menuCartCount = document.getElementById('menuCartCount');
        const indicator = document.getElementById('hamburgerIndicator');
        const menuBtnEl = document.getElementById('menuBtn');
        
        // Silently skip if not authenticated or API not loaded
        if (typeof API === 'undefined' || !window.blackonnAuth || !window.blackonnAuth.hasToken()) {
            [cartCount, menuCartCount].forEach(el => {
                if (el) {
                    el.textContent = '0';
                    el.classList.remove('show');
                }
            });
            if (indicator) indicator.classList.remove('show');
            return;
        }
        
        try {
          const cartData = await API.cart.get();
          const cart = cartData.cart || [];
          const totalQuantity = cart.reduce((sum, item) => sum + item.quantity, 0);
          
          if (cartCount) {
            cartCount.textContent = totalQuantity;
            if (totalQuantity > 0) {
              cartCount.classList.add('show');
            } else {
              cartCount.classList.remove('show');
            }
          }
          if (menuCartCount) {
            menuCartCount.textContent = totalQuantity;
            if (totalQuantity > 0) {
              menuCartCount.classList.add('show');
            } else {
              menuCartCount.classList.remove('show');
            }
          }
          // Only show hamburger indicator if menu is NOT open
          if (indicator) {
            const isMenuOpen = menuBtnEl && menuBtnEl.classList.contains('open');
            if (totalQuantity > 0 && !isMenuOpen) {
              indicator.classList.add('show');
            } else {
              indicator.classList.remove('show');
            }
          }
        } catch (error) {
          console.error('Failed to update cart count:', error);
          // Reset counts on error
          if (cartCount) {
            cartCount.textContent = '0';
            cartCount.classList.remove('show');
          }
          if (menuCartCount) {
            menuCartCount.textContent = '0';
            menuCartCount.classList.remove('show');
          }
          if (indicator) {
            indicator.classList.remove('show');
          }
        }
      }

      // Update cart count on page load
      updateCartCount();

      // Listen for storage changes (when adding to cart)
      window.addEventListener('storage', updateCartCount);

      // Cart icon will navigate via href link
      
      // Login icon click handler
      const loginIcon = document.getElementById('loginIcon');
      if (loginIcon) {
        loginIcon.addEventListener('click', (e) => {
          e.preventDefault();
          window.location.href = 'login.html';
        });
      }
    </script>
    <!-- Fullscreen Menu End-->

    <!-- Video Slider -->
    <main class="main" role="main" itemscope itemtype="https://schema.org/ItemList">
      <meta itemprop="name" content="BLACKONN Featured Collection">
      <meta itemprop="description" content="Premium black clothing and streetwear collection">
      
      <div class="slider-wrapper" role="region" aria-label="Featured products carousel">
        <div class="slider-track" id="sliderTrack" aria-live="polite" aria-atomic="true">
          <!-- Server-side Placeholder (First Slide) for Instant LCP -->
          <div class="slide active" style="width: 100%; height: 100%; position: absolute; top: 0; left: 0;">
            <img src="assets/img/BLACKONN 004_page-0001.png" alt="BLACKONN Featured Collection" 
                 style="width: 100%; height: 100%; object-fit: cover;" 
                 fetchpriority="high" loading="eager">
          </div>
          
          <div class="slide-loading" style="display:none;align-items:center;justify-content:center;width:100%;height:100%;background:#1f2937;color:#fff;" role="status" aria-live="polite">
            <i class="ri-loader-4-line" style="font-size:2rem;animation:spin 1s linear infinite;" aria-hidden="true"></i>
            <span class="sr-only">Loading featured collection...</span>
          </div>
        </div>
        
        <div class="dots" id="dots" role="tablist" aria-label="Slide navigation">
          <!-- Dots generated dynamically -->
        </div>
      </div>

      <script>
        // Dynamic Slider - Loaded from API
        let slidesData = [];
        let slideIndex = 0;
        let slideLoop = null;
        const slideDuration = 6000; // 6 seconds

        // Local SVG placeholder generator - no external service needed
        function getPlaceholder(width = 100, height = 100, text = 'No Image') {
          const svg = `<svg xmlns="http://www.w3.org/2000/svg" width="${width}" height="${height}" viewBox="0 0 ${width} ${height}">
            <rect fill="#f0f0f0" width="${width}" height="${height}"/>
            <text fill="#999" font-family="Arial,sans-serif" font-size="${Math.min(width, height) / 8}" text-anchor="middle" x="${width/2}" y="${height/2}" dy=".3em">${text}</text>
          </svg>`;
          return 'data:image/svg+xml,' + encodeURIComponent(svg);
        }

        async function loadHeroSlides() {
          const track = document.getElementById("sliderTrack");
          const dotsContainer = document.getElementById("dots");
          
          try {
            const response = await API.slides.getAll();
            slidesData = response.slides || [];
            
            if (slidesData.length === 0) {
              // Fallback if no slides in database
              track.innerHTML = `<div style="display:flex;align-items:center;justify-content:center;width:100%;height:100%;background:#1f2937;color:#fff;">
                <p>No slides configured</p>
              </div>`;
              return;
            }
            
            // Helper to normalize media URLs (make relative uploads absolute if needed)
            // Supports values like '/uploads/...', '/api/uploads/...' and bare filenames like 'BG_VIDEO.mp4'
            const normalizeMediaUrl = (u, type) => {
              try {
                if (!u) return u;

                // Convert API upload paths to public uploads path
                if (u.startsWith('/api/uploads')) {
                  u = u.replace('/api/uploads', '/uploads');
                }

                // If URL already root-relative (/uploads/...), prefix origin
                if (u.startsWith('/')) {
                  const base = (typeof API !== 'undefined' && API.getBaseUrl) ? API.getBaseUrl() : window.location.origin;
                  return base.replace(/\/$/, '') + u;
                }

                // Bare filenames (e.g., 'BG_VIDEO.mp4') - assume slides were saved to uploads/slides
                // Only apply for slide entries; for arbitrary external URLs leave as-is
                if (type === 'video' || type === 'image') {
                  // Heuristic: if it looks like a filename with extension, prefix uploads/slides
                  if (/^[\w\-]+\.[a-z0-9]{2,6}$/i.test(u)) {
                    const base = (typeof API !== 'undefined' && API.getBaseUrl) ? API.getBaseUrl() : window.location.origin;
                    return base.replace(/\/$/, '') + '/uploads/slides/' + u;
                  }
                }

                // Otherwise, return as provided (could be absolute URL)
                return u;
              } catch (e) {
                return u;
              }
            };

            // Render slides (use normalized URLs) with FAST loading
            track.innerHTML = slidesData.map((slide, index) => {
              const src = normalizeMediaUrl(slide.src || slide.image || '');
              const poster = slide.poster ? normalizeMediaUrl(slide.poster) : '';
              
              if (slide.type === 'video') {
                // ALL videos preload auto for fastest loading
                return `<video src="${src}" muted playsinline loop preload="auto" poster="${poster}" style="background:#000; object-fit: cover; width: 100%; height: 100%;">
                  <source src="${src}" type="video/mp4">
                  <source src="${src.replace('.mp4', '.webm')}" type="video/webm">
                </video>`;
              } else {
                // ALL images load eagerly with high priority for instant display
                const fallback = "/assets/img/placeholder.png";
                return `<img src="${src}" onerror="this.src='${fallback}'" alt="${slide.title || 'Hero Image'}" loading="eager" decoding="async" fetchpriority="high" style="object-fit: cover; width: 100%; height: 100%;" />`;
              }
            }).join('');
            
            // Preload IMAGES for instant transitions (Videos already use preload="auto" in the DOM)
            slidesData.forEach((slide, i) => {
              if (i === 0 || slide.type === 'video') return; 
              const nextSrc = normalizeMediaUrl(slide.src || slide.image || '');
              if (nextSrc) {
                const link = document.createElement('link');
                link.rel = 'preload';
                link.as = 'image';
                link.href = nextSrc;
                document.head.appendChild(link);
              }
            });
            
            // Render dots
            dotsContainer.innerHTML = slidesData.map((_, i) => 
              `<div class="dot ${i === 0 ? 'active' : ''}" data-i="${i}"></div>`
            ).join('');
            
            // Initialize slider
            initSlider();
          } catch (error) {
            console.error('Failed to load slides:', error);
            // Show error state
            track.innerHTML = `<div style="display:flex;align-items:center;justify-content:center;width:100%;height:100%;background:#1f2937;color:#fff;">
              <p>Unable to load slides</p>
            </div>`;
          }
        }

        function initSlider() {
          const track = document.getElementById("sliderTrack");
          const dots = document.querySelectorAll(".dot");
          const slides = track.querySelectorAll("video, img");
          const wrapper = track.closest('.slider-wrapper');
          
          if (slides.length === 0) return;

          // Ensure hardware-accelerated transform
          track.style.willChange = 'transform';

          function goToSlide(i) {
            slideIndex = i;
            // Use pixel-based translate for compatibility with touch dragging
            const slideW = wrapper ? wrapper.clientWidth : track.clientWidth;
            // High-performance transition for buttery smooth movement
            track.style.transition = 'transform 700ms ease';
            track.style.transform = `translateX(${ -i * slideW }px)`;

            slides.forEach((s, x) => {
              if (s.tagName === 'VIDEO') {
                if (x === i) {
                  // Active video - play immediately
                  s.currentTime = 0;
                  s.play().catch(() => {});
                } else {
                  // Inactive videos - just pause, keep preloaded for instant switching
                  s.pause();
                }
              }
            });

            dots.forEach(d => d.classList.remove("active"));
            if (dots[i]) dots[i].classList.add("active");
          }

          dots.forEach(dot => {
            dot.onclick = () => {
              goToSlide(parseInt(dot.dataset.i));
              restartLoop();
            };
          });

          function startLoop() {
            return setInterval(() => {
              slideIndex = (slideIndex + 1) % slides.length;
              goToSlide(slideIndex);
            }, slideDuration);
          }

          function restartLoop() {
            if (slideLoop) clearInterval(slideLoop);
            slideLoop = startLoop();
          }

          // Touch / swipe support for mobile
          (function enableTouch() {
            if (!('ontouchstart' in window)) return;

            let startX = 0;
            let startY = 0;
            let deltaX = 0;
            let isDragging = false;
            let isScrolling = false;

            function getSlideWidth() {
              return wrapper ? wrapper.clientWidth : track.clientWidth;
            }

            function onTouchStart(e) {
              if (!e.touches || e.touches.length > 1) return;
              startX = e.touches[0].clientX;
              startY = e.touches[0].clientY;
              deltaX = 0;
              isDragging = true;
              isScrolling = false;
              // Pause loop while interacting
              if (slideLoop) clearInterval(slideLoop);
              track.style.transition = 'none';
            }

            function onTouchMove(e) {
              if (!isDragging) return;
              const touch = e.touches[0];
              const moveX = touch.clientX;
              const moveY = touch.clientY;
              deltaX = moveX - startX;
              const absX = Math.abs(deltaX);
              const absY = Math.abs(moveY - startY);

              // If vertical movement is larger, flag as scrolling and let the page scroll
              if (!isScrolling && absY > absX) {
                isScrolling = true;
                isDragging = false;
                // restart autoplay
                restartLoop();
                return;
              }

              // Prevent page scroll when horizontal swipe
              if (!isScrolling) e.preventDefault();

              const slideW = getSlideWidth();
              const translate = -slideIndex * slideW + deltaX;
              track.style.transform = `translateX(${translate}px)`;
            }

            function onTouchEnd() {
              if (!isDragging) return;
              isDragging = false;
              const slideW = getSlideWidth();
              const threshold = Math.min(50, slideW * 0.18); // px

              // Restore transition
              track.style.transition = 'transform 400ms ease';

              if (deltaX > threshold && slideIndex > 0) {
                goToSlide(slideIndex - 1);
              } else if (deltaX < -threshold && slideIndex < slides.length - 1) {
                goToSlide(slideIndex + 1);
              } else {
                goToSlide(slideIndex);
              }

              // Restart autoplay
              restartLoop();
            }

            wrapper.addEventListener('touchstart', onTouchStart, { passive: true });
            wrapper.addEventListener('touchmove', onTouchMove, { passive: false });
            wrapper.addEventListener('touchend', onTouchEnd);
            wrapper.addEventListener('touchcancel', onTouchEnd);
          })();

          // Start slider
          goToSlide(0);
          slideLoop = startLoop();

          // Recalculate positions on resize
          window.addEventListener('resize', () => {
            // Re-apply current slide transform using new width
            goToSlide(slideIndex);
          });
        }

        // Load slides when API is ready
        document.addEventListener('DOMContentLoaded', () => {
          // Wait a bit for API to initialize
          setTimeout(loadHeroSlides, 100);
        });
      </script>
      <!-- Video Slider -->
       
      <section class="section">
        <div class="collections-title">
          OUR COLLECTIONS
        </div>
      </section>
    </main>

      <div class="container" id="shop">
      <!-- Dynamic products loaded from API -->
      <div id="productsContainer">
        <!-- Products will be rendered here by JavaScript -->
        <div class="loading-products" style="display: grid; gap: 2rem; padding: 2rem 0;">
          <!-- Skeleton Loader -->
          <div class="section skeleton" style="height: 400px; border-radius: 12px;"></div>
          <div class="section reverse skeleton" style="height: 400px; border-radius: 12px;"></div>
          <div class="section skeleton" style="height: 400px; border-radius: 12px;"></div>
        </div>
      </div>
      </div>
      <!-- 6 products zigzag (R L R L R L) End-->

      <style>
        @keyframes spin {
          from { transform: rotate(0deg); }
          to { transform: rotate(360deg); }
        }
      </style>

      <!-- API Client for Full-Stack Mode (Removed - handled in head) -->
      <script src="assets/js/security.js"></script>
      <script>
        console.log('[INIT] Home page script loaded');
        let products = [];

        // Load products from API
        async function fetchHomeProducts() {
          const container = document.getElementById('productsContainer');
          
          try {
            console.log('[HOME] Fetching products from API...');
            const response = await API.products.getAll();
            console.log('[HOME] API Response:', response);
            const apiProducts = (response && response.products) ? response.products : [];
            console.log('[HOME] API Products count:', apiProducts.length);

            // Debug mode: show raw API response in-page when ?debug=1 is present
            try {
              const _params = new URLSearchParams(window.location.search);
              if (_params.get('debug') === '1') {
                container.innerHTML = `\n                  <div style="padding:18px;background:#fff;border:1px solid #ddd;max-height:72vh;overflow:auto;white-space:pre-wrap;">\n                    <h3 style="margin:0 0 8px 0;font-size:16px;">DEBUG: /api/products response</h3>\n                    <pre style="font-size:12px;">${JSON.stringify(response, null, 2)}</pre>\n                  </div>`;
                // continue rendering below so debug + UI are visible
              }
            } catch (e) {
              console.warn('[HOME] debug UI failed', e);
            }

            if (apiProducts && apiProducts.length > 0) {
              // Filter products with positions 1-6 and sort by position
              const positionedProducts = [];
              
              // Create slots for positions 1-6
              for (let pos = 1; pos <= 6; pos++) {
                const productAtPos = apiProducts.find(p => Number(p.position) === pos);
                console.log(`[HOME] Position ${pos}: ${productAtPos ? productAtPos.name : 'empty'}`);
                if (productAtPos) {
                  // Get first thumbnail from thumbImages array or fallback to image
                  const firstThumb = (productAtPos.thumbImages && productAtPos.thumbImages.length > 0) 
                    ? productAtPos.thumbImages[0] 
                    : (productAtPos.image || getPlaceholder(400, 400, 'Thumb'));
                  
                  positionedProducts.push({
                    id: productAtPos.id,
                    position: productAtPos.position,
                    name: productAtPos.name || 'Product',
                    desc: productAtPos.desc || productAtPos.description || `Premium ${productAtPos.name || 'product'} with quality materials.`,
                    image: productAtPos.image || getPlaceholder(800, 800, 'Product'),
                    thumbImage: firstThumb,
                    thumbImages: productAtPos.thumbImages || []
                  });
                }
              }
              
              console.log('[HOME] Positioned products:', positionedProducts);
              products = positionedProducts;
            } else {
              console.log('[HOME] No products from API');
              products = [];
            }
            
            console.log('[HOME] Calling renderHomeProducts with', products.length, 'products');
            renderHomeProducts();
          } catch (error) {
            console.error('[HOME] ERROR Fetching products:', error);
            console.error('[HOME] Error message:', error.message);
            console.error('[HOME] Error stack:', error.stack);
            container.innerHTML = `
              <div style="text-align:center;padding:60px;color:#666;">
                <i class="ri-error-warning-line" style="font-size:2rem;color:#e74c3c;"></i>
                <p style="margin-top:16px;">Unable to load products. Error: ${error.message}</p>
                <button onclick="fetchHomeProducts()" style="margin-top:16px;padding:12px 24px;background:#000;color:#fff;border:none;border-radius:8px;cursor:pointer;">
                  Retry
                </button>
              </div>
            `;
          }
        }

        // Helper to normalize product image URLs
        function normalizeProductUrl(url) {
          if (!url || url === 'undefined') return getPlaceholder(800, 800, 'Product');
          if (url.startsWith('/api/uploads')) {
            return url.replace('/api/uploads', '/uploads');
          }
          if (url.startsWith('/uploads') || url.startsWith('http') || url.startsWith('data:') || url.startsWith('assets/')) {
            return url;
          }
          // Bare filename - assume it's a product image
          if (!url.includes('/') && /^[\w\-\.]+$/.test(url)) {
            return '/uploads/products/' + url;
          }
          return url;
        }

        function renderHomeProducts() {
          const container = document.getElementById('productsContainer');
          console.log('[RENDER] renderHomeProducts called');
          console.log('[RENDER] products array:', products);
          console.log('[RENDER] container element:', container);
          
          if (!products || products.length === 0) {
            console.log('[RENDER] No products to render, showing empty message');
            container.innerHTML = '<p style="text-align:center;padding:60px;color:#666;">No products available.</p>';
            return;
          }

          const html = products.map((product, index) => {
            const isReverse = index % 2 === 1;
            // Use main image as primary, fall back to first thumbnail only if main image is missing
            const imgSrc = normalizeProductUrl(product.image || product.thumbImage);
            // ALL products load eagerly with high priority for instant display
            
            return `
              <div class="section${isReverse ? ' reverse' : ''}" data-index="${index}">
                <div class="media hover-scale">
                  <img src="${imgSrc}" alt="${product.name}" 
                       loading="eager"
                       decoding="async"
                       fetchpriority="high"
                       onerror="this.src=getPlaceholder(800, 800, '${product.name.replace(/'/g, '')}')">
                </div>
                <div class="text">
                  <div class="title">${product.name}</div>
                  <div class="desc">${product.desc}</div>
                  <div class="controls">
                    <button class="btn hover-lift btn-pulse" data-action="show" data-id="${product.id}" data-i="${index}">Show More</button>
                  </div>
                </div>
              </div>
            `;
          }).join('');

          console.log('[RENDER] Generated HTML length:', html.length);
          container.innerHTML = html;
          
          console.log('[RENDER] Products rendered to container');

          // Initialize IntersectionObserver for dynamically loaded products
          // This replaces the immediate in-view class for proper scroll-triggered animations
          const productSections = document.querySelectorAll('#productsContainer .section');
          if ('IntersectionObserver' in window && productSections.length > 0) {
            const productObserver = new IntersectionObserver((entries) => {
              entries.forEach(entry => {
                const el = entry.target;
                const idx = parseInt(el.dataset.index) || 0;
                
                if (entry.isIntersecting) {
                  // Stagger the animation based on index
                  el.style.transitionDelay = (idx * 90) + 'ms';
                  el.classList.add('in-view');
                } else {
                  // Remove class on exit so animation replays when scrolling back
                  el.classList.remove('in-view');
                  el.style.transitionDelay = '';
                }
              });
            }, { threshold: 0.1, rootMargin: '0px 0px -5% 0px' });

            productSections.forEach(section => productObserver.observe(section));
          } else {
            // Fallback: make visible immediately if no IntersectionObserver
            productSections.forEach((s) => s.classList.add('in-view'));
          }
        }

        // Initialize products on page load
        fetchHomeProducts();

        // Show More & Buy buttons on grid â€” document-level delegation (robust)
        document.addEventListener('click', (e) => {
          const btn = e.target.closest('.btn');
          if(!btn) return;
          // ensure button belongs to the shop grid
          if(!btn.closest('#shop')) return;
          const action = btn.dataset.action;
          const productId = btn.dataset.id;
          const idx = Number(btn.dataset.i);
          
          if(action === 'show') {
            // Use product ID if available, otherwise use index
            if (productId && productId !== 'undefined') {
              window.location.href = `products.html?id=${productId}`;
            } else {
              window.location.href = `products.html?id=${idx}`;
            }
          } else if(action === 'buy') {
            quickBuy(idx);
          }
        });

        // quick buy (no modal)
        function quickBuy(i){
          if(!products || !products[i]){
            console.error('Product not found for quickBuy:', i);
            return;
          }
          const p = products[i];
          const msg = encodeURIComponent(`Hi, I'm interested in ${p.name}`);
          window.open(`https://wa.me/918420889722?text=${msg}`, '_blank');
        }

        // Update cart count now that API is loaded
        updateCartCount();
      </script>
    </main>

    <!-- Footer-->
    <footer class="footer" id="contact">
      <div class="logo">
        <img src="assets/img/BLACKONN 004_page-0001.png" style="width:150px;height:50px;" alt="BLACKONN Logo">

        <p style="font-size:16px; line-height:1.6;">
        Each creation that bears our name is more than fabric and thread â€” it is an embodiment of artistry.</p>
      </div>

      <div>
        <h3>The Atelier</h3>
        <ul>
          <li><a href="about.html">About Us</a></li>
          <li><a href="products.html">Category</a></li>
          <li><a href="contact.html">Contact Info</a></li>
          <li><a href="faq.html">FAQ</a></li>
          <li><a href="products.html">Shop</a></li>
          <li><a href="size-guide.html">Size Guide</a></li>
        </ul>
      </div>

      <div>
        <h3>Regimen</h3>
        <ul>
          <li><a href="cancellation-policy.html">Cancellation Policy</a></li>
          <li><a href="payment-policy.html">Payment Policy</a></li>
          <li><a href="privacy-policy.html">Privacy Policy</a></li>
          <li><a href="refund-policy.html">Refund Policy</a></li>
          <li><a href="return-policy.html">Return Policy</a></li>
          <li><a href="shipping.html">Shipping & Delivery</a></li>
        </ul>
      </div>

      <div>
        <h3>Contact Us</h3>
        <div class="socials">
          <a href="https://www.facebook.com/share/1GhKYo1Bc6/" target="_blank" rel="noopener" aria-label="Facebook">
            <i class="ri-facebook-fill"></i>
          </a>
          <a href="https://www.instagram.com/blackonnindia?igsh=ZXB6azlkM2MzZW82" target="_blank" rel="noopener" aria-label="Instagram">
            <i class="ri-instagram-fill"></i>
          </a>
          <a href="https://wa.me/918420889722" target="_blank" rel="noopener" aria-label="WhatsApp">
            <i class="ri-whatsapp-fill"></i>
          </a>
        </div>
        
        <h3 style="margin-top: 25px;">Newsletter</h3>
        <p style="font-size: 14px; color: #666;">Subscribe for updates & offers</p>
        <form class="newsletter-form" onsubmit="subscribeNewsletter(event)">
          <input type="email" class="newsletter-input" placeholder="Enter your email" required>
          <button type="submit" class="newsletter-btn" aria-label="Subscribe"><i class="ri-arrow-right-line"></i></button>
        </form>
      </div>
    </footer>

    <div class="bottom">
      Â© BLACKONN 2025. All rights reserved Â· <a href="terms.html">Terms & Conditions</a> Â· <a href="privacy-policy.html">Privacy Policy</a>
    </div>

    <!-- Terms & Conditions Modal - REMOVED: Now on separate page (terms.html) -->

    <!-- Contact Popup Modal - REMOVED: Now on separate page (contact.html) -->

    <!-- Policy Modals - REMOVED: Now on separate pages -->

    <!-- Cookie Consent Banner -->
    <div id="cookie-consent" class="cookie-consent hidden">
      <div class="cookie-content">
        <p>We use cookies to enhance your experience. By continuing to visit this site you agree to our use of cookies.</p>
        <div class="cookie-buttons">
          <button id="accept-cookies" class="btn-cookie accept">Accept</button>
          <button id="decline-cookies" class="btn-cookie decline">Decline</button>
        </div>
      </div>
    </div>

    <script>
      // Modal functionality removed - all modals converted to separate pages
    </script>

    <a href="#" class="scrollup" id="scroll-up" aria-label="Scroll to top">
      <i class="ri-arrow-up-line"></i>
    </a>
            
    <script src="assets/js/scrollreveal.min.js"></script>

    <script src="assets/js/swiper-bundle.min.js"></script>

    <!-- ðŸš€ NEXT-GENERATION ADVANCED SYSTEMS -->
    <!-- Real-time & Communication -->
    <script src="assets/js/realtime-manager.js"></script>
    
    <!-- Security & Error Tracking -->
    <script src="assets/js/security-manager.js"></script>
    <script src="assets/js/error-tracker.js"></script>
    
    <!-- Machine Learning & Personalization -->
    <script src="assets/js/ml-engine.js"></script>
    
    <!-- User Experience -->
    <script src="assets/js/form-manager.js"></script>
    <script src="assets/js/image-optimizer.js"></script>
    <script src="assets/js/i18n-manager.js"></script>
    
    <!-- Experimentation -->
    <script src="assets/js/ab-testing.js"></script>
    
    <!-- Performance & Caching -->
    <script src="assets/js/advanced-cache.js"></script>
    <script src="assets/js/performance-optimizer.js"></script>
    <script src="assets/js/pwa-manager.js"></script>
    
    <!-- ðŸŒŸ WORLD-FIRST CUTTING-EDGE TECHNOLOGIES -->
    <!-- AI & Biometrics -->
    <script src="assets/js/emotion-ai.js"></script>
    <script src="assets/js/biometric-auth.js"></script>
    
    <!-- Future Tech -->
    <script src="assets/js/neural-commerce.js"></script>
    
    <!-- Core Scripts -->
    <script src="assets/js/main.js"></script>
    <script src="assets/js/ai-analytics.js"></script>
    <script src="assets/js/ai-dashboard.js"></script>
    <script src="assets/js/analytics.js"></script>
    <script src="assets/js/console-block.js"></script>
  </body>
</html>


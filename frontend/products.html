<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <!-- SEO Meta Tags -->
  <title>Shop Products - BLACKONN | Premium Black Clothing</title>
  <meta name="description" content="Browse our collection of premium black clothing. Oversized t-shirts, slim fit shirts, hoodies, caps, bags & more. Quality streetwear with free shipping on all orders.">
  <meta name="keywords" content="black t-shirts, oversized shirts, hoodies, caps, bags, streetwear, BLACKONN products, buy online">
  <meta name="author" content="BLACKONN">
  <meta name="robots" content="index, follow">
  <link rel="canonical" href="https://blackonn.com/products.html">
  
  <!-- Open Graph / Facebook -->
  <meta property="og:type" content="product">
  <meta property="og:url" content="https://blackonn.com/products.html">
  <meta property="og:title" content="Shop Products - BLACKONN | Premium Black Clothing">
  <meta property="og:description" content="Browse our collection of premium black clothing. Quality streetwear with free shipping.">
  <meta property="og:image" content="assets/img/BLACKONN 004_page-0001.png">
  <meta property="og:locale" content="en_IN">
  
  <!-- Twitter -->
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" content="Shop Products - BLACKONN | Premium Black Clothing">
  <meta name="twitter:description" content="Browse our collection of premium black clothing. Quality streetwear with free shipping.">
  <meta name="twitter:image" content="assets/img/BLACKONN 004_page-0001.png">
  
  <style>
    html { background: #eef3f8; }
    body { background: #eef3f8; }
    .nav {
      background: #eef3f8 !important;
    }
    .cart-count {
      display: none !important;
    }
    .cart-count.show {
      display: flex !important;
    }
    .logo img {
      width: 175px;
      height: 50px;
      margin-bottom: 15px;
    }
  </style>

  <link rel="shortcut icon" href="assets/img/favicon.png" type="image/x-icon">
  
  <!-- High-Priority Resource Hints -->
  <link rel="preconnect" href="https://cdnjs.cloudflare.com">
  <link rel="dns-prefetch" href="https://cdnjs.cloudflare.com">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>

  <style>
    /* Product Information Sections */
    .product-info-sections {
      display: flex;
      gap: 60px;
      padding: 80px 8%;
      background: #f8fafc;
      margin: 0 auto;
      max-width: 1400px;
      flex-wrap: wrap;
      justify-content: center;
    }

    .info-section {
      flex: 1;
      min-width: 300px;
      padding: 0;
      transition: transform 0.3s ease;
      will-change: transform;
    }

    .info-section:hover {
      transform: translate3d(0, -2px, 0);
    }

    .section-header {
      display: flex;
      align-items: center;
      gap: 12px;
      margin-bottom: 32px;
    }

    .section-icon {
      font-size: 2rem;
      color: #000;
    }

    .section-header h3 {
      font-size: 1.5rem;
      font-weight: 700;
      color: #000;
      margin: 0;
      letter-spacing: -0.5px;
    }

    /* Delivery Information */
    .info-grid {
      display: grid;
      gap: 24px;
    }

    .info-item {
      display: flex;
      align-items: center;
      gap: 16px;
      padding: 0;
      transition: transform 0.3s ease;
      will-change: transform;
    }

    .info-item:hover {
      transform: translate3d(4px, 0, 0);
    }

    .info-icon {
      font-size: 1.8rem;
      color: #000;
      flex-shrink: 0;
    }

    .info-content h4 {
      font-size: 1.1rem;
      font-weight: 600;
      color: #000;
      margin: 0 0 4px 0;
    }

    .info-content p {
      font-size: 0.95rem;
      color: #666;
      margin: 0;
      line-height: 1.4;
    }

    /* Care Instructions */
    .care-grid {
      display: grid;
      gap: 20px;
    }

    .care-item {
      display: flex;
      align-items: center;
      gap: 14px;
      padding: 0;
      transition: transform 0.3s ease;
      will-change: transform;
    }

    .care-item:hover {
      transform: translate3d(4px, 0, 0);
    }

    .care-icon {
      font-size: 1.6rem;
      color: #000;
      flex-shrink: 0;
    }

    .care-content h4 {
      font-size: 1rem;
      font-weight: 600;
      color: #000;
      margin: 0 0 2px 0;
    }

    .care-content p {
      font-size: 0.9rem;
      color: #666;
      margin: 0;
      line-height: 1.3;
    }

    /* Social Sharing */
    .social-buttons {
      display: flex;
      flex-direction: column;
      gap: 16px;
    }

    .social-btn {
      display: flex;
      align-items: center;
      gap: 12px;
      padding: 0;
      border: none;
      border-radius: 8px;
      font-size: 1rem;
      font-weight: 500;
      cursor: pointer;
      transition: transform 0.3s ease, color 0.3s ease;
      text-decoration: none;
      background: transparent;
      color: #000;
      justify-content: flex-start;
      will-change: transform;
    }

    /* Footer-style hover effect - vertical lift */
    .social-btn:hover {
      transform: translate3d(0, -4px, 0);
    }
    
    /* Individual hover colors for each social button */
    .social-btn.facebook-btn:hover { color: #1877f2; }
    .social-btn.twitter-btn:hover { color: #1da1f2; }
    .social-btn.whatsapp-btn:hover { color: #25d366; }
    .social-btn.instagram-btn:hover { color: #e4405f; }
    .social-btn.copy-btn:hover { color: #6366f1; }

    .social-btn i {
      font-size: 1.4rem;
      flex-shrink: 0;
    }

    /* Responsive Design */
    @media (max-width: 1024px) {
      .product-info-sections {
        gap: 40px;
        padding: 60px 6%;
      }

      .info-section {
        min-width: 280px;
      }
    }

    @media (max-width: 768px) {
      .product-info-sections {
        flex-direction: column;
        gap: 40px;
        padding: 60px 5%;
      }

      .info-section {
        min-width: unset;
      }

      .section-header h3 {
        font-size: 1.3rem;
      }

      .social-buttons {
        flex-direction: row;
        flex-wrap: wrap;
        gap: 20px;
      }

      .social-btn {
        flex: 1;
        min-width: 140px;
        justify-content: center;
        padding: 0;
        font-size: 0.9rem;
      }

      .social-btn span {
        display: none;
      }

      .social-btn i {
        font-size: 1.6rem;
      }
    }

    @media (max-width: 480px) {
      .product-info-sections {
        padding: 40px 4%;
        gap: 32px;
      }

      .info-section {
        padding: 0;
      }

      .section-header {
        gap: 10px;
        margin-bottom: 24px;
      }

      .section-icon {
        font-size: 1.8rem;
      }

      .section-header h3 {
        font-size: 1.2rem;
      }

      .social-buttons {
        gap: 16px;
      }

      .social-btn {
        min-width: 120px;
        padding: 0;
      }
    }
  </style>
  <link rel="shortcut icon" href="assets/img/favicon.png" type="image/x-icon">
  <!-- remixicon icons link -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/remixicon/3.5.0/remixicon.min.css">
  <link rel="stylesheet" href="assets/css/swiper-bundle.min.css">
  <link rel="stylesheet" href="assets/css/styles.css">
  <title>Product Details - BLACKONN</title>
</head>
<body>

<!-- Premium Glass Hamburger Navbar -->
<header class="nav">
  <div class="nav-container">
    <div class="logo">
      <a href="index.html">
        <img src="assets/img/BLACKONN 004_page-0001.png" alt="BLACKONN Logo" title="BLACKONN">
      </a>
    </div>

    <div class="nav-right">
      <div class="nav-icons">
        <a href="login.html" class="nav-icon login-icon" id="loginIcon" title="Login">
          <i class="ri-user-line"></i>
        </a>
        <a href="profile.html" class="nav-user" id="navUser" style="display: none;" aria-label="Profile">
          <i class="ri-user-line" id="navUserIcon"></i>
          <span class="user-name" id="navUserName"></span>
        </a>
        <a href="cart.html" class="nav-icon cart-icon" id="cartIcon" title="Shopping Cart">
          <i class="ri-shopping-cart-line"></i>
          <span class="cart-count" id="cartCount">0</span>
        </a>
      </div>
      <button class="hamburger" id="menuBtn" aria-label="Open menu">
        <span></span><span></span><span></span>
      </button>
    </div>
  </div>
</header>
<!-- Premium Glass Hamburger Navbar End-->

<!-- Fullscreen Menu -->
<div class="fullscreen-menu" id="fullMenu">
  <button class="close-menu" id="closeMenu">×</button>
  <ul>
    <li><a href="index.html#shop" title="Shop"><i class="ri-shopping-bag-line"></i></a></li>
    <li id="giftCardMenuItem"><a href="gift-cards.html" aria-label="Gift Cards" title="Gift Cards"><i class="ri-gift-line"></i></a></li>
    <li><a href="index.html#about" title="About"><i class="ri-information-line"></i></a></li>
    <li><a href="index.html#contact" title="Contact"><i class="ri-mail-line"></i></a></li>
    <li><a href="cart.html" title="Cart"><i class="ri-shopping-cart-line"></i></a></li>
    <li id="menuLoginItem"><a href="login.html" title="Login"><i class="ri-user-line"></i></a></li>
  </ul>
</div>

<script>
(async function() {
  try {
    const res = await fetch('/api/marketing/feature-visibility?_=' + Date.now(), { cache: 'no-store' });
    const data = await res.json();
    if (data.success && !data.features.giftCardsEnabled) {
      const el = document.getElementById('giftCardMenuItem');
      if (el) el.style.display = 'none';
    }
  } catch(e) {}
})();
</script>
 
<!-- Load API client and Auth early so inline scripts can use API/cart functions -->
<script src="assets/js/api.js"></script>
<script src="assets/js/auth.js"></script>

<script>
  // Menu Toggle
  const menuBtn = document.getElementById('menuBtn');
  const fullMenu = document.getElementById('fullMenu');
  const closeMenu = document.getElementById('closeMenu');

  menuBtn.addEventListener('click', () => {
    // open menu
    fullMenu.style.display = 'flex';
    fullMenu.classList.remove('closing');
    fullMenu.classList.add('open');
    menuBtn.classList.add('open');
  });

  function closeFullMenu(){
    // add closing animation class then hide after animation
    fullMenu.classList.add('closing');
    fullMenu.classList.remove('open');
    // animate hamburger back to closed state with a small closing class
    menuBtn.classList.add('closing');
    menuBtn.classList.remove('open');
    setTimeout(()=>{
      menuBtn.classList.remove('closing');
      fullMenu.style.display = 'none';
      fullMenu.classList.remove('closing');
    }, 350);
  }

  closeMenu.addEventListener('click', closeFullMenu);

  /* Close menu when a link is clicked */
  fullMenu.querySelectorAll('a').forEach(link => {
    link.addEventListener('click', closeFullMenu);
  });

  // Hide login icon in menu if user is logged in
  function updateMenuLoginIcon() {
    const hasToken = window.blackonnAuth && window.blackonnAuth.hasToken();
    const menuLoginItem = document.getElementById('menuLoginItem');
    if (hasToken && menuLoginItem) {
      menuLoginItem.style.display = 'none';
    }
  }

  // Global variables for selected options (using window for cross-script access)
  window.globalSelectedSize = null;
  window.globalSelectedColor = null;
  window.globalCurrentProduct = null;

  // Update cart count from API
  async function updateCartCount() {
    const cartCount = document.getElementById('cartCount');

    // Silently skip if not authenticated
    if (!window.blackonnAuth || !window.blackonnAuth.hasToken()) {
      if (cartCount) {
        cartCount.textContent = '0';
        cartCount.classList.remove('show');
      }
      return;
    }

    try {
      const cartData = await API.cart.get();
      const cart = cartData.cart || [];
      const totalQuantity = cart.reduce((sum, item) => sum + item.quantity, 0);
      if (cartCount) {
        cartCount.textContent = totalQuantity;
        if (totalQuantity > 0) {
          cartCount.classList.add('show');
        } else {
          cartCount.classList.remove('show');
        }
      }
    } catch (error) {
      console.error('Error updating cart count:', error);
      if (cartCount) {
        cartCount.textContent = '0';
        cartCount.classList.remove('show');
      }
    }
  }

  // Check if user is logged in and update navbar
  async function updateNavUser() {
    try {
      // Check if blackonnAuth is available
      if (!window.blackonnAuth || !window.blackonnAuth.getCurrentUser) {
        // Auth not loaded yet, try API fallback
        try {
          const authData = await API.auth.me();
          if (authData.success && authData.user) {
            const user = authData.user;
            const loginIcon = document.getElementById('loginIcon');
            const navUser = document.getElementById('navUser');
            const navUserName = document.getElementById('navUserName');
            if (loginIcon) loginIcon.style.display = 'none';
            if (navUser) {
              navUser.style.display = 'flex';
              const firstName = user.name ? user.name.split(' ')[0] : 'User';
              if (navUserName) navUserName.textContent = firstName;
            }
            return;
          }
        } catch (e) {
          // Not logged in, show login icon
        }
        const loginIcon = document.getElementById('loginIcon');
        const navUser = document.getElementById('navUser');
        if (loginIcon) loginIcon.style.display = 'flex';
        if (navUser) navUser.style.display = 'none';
        return;
      }
      const user = await window.blackonnAuth.getCurrentUser();
      const loginIcon = document.getElementById('loginIcon');
      const navUser = document.getElementById('navUser');
      const navUserName = document.getElementById('navUserName');
      const navUserIcon = document.getElementById('navUserIcon');

      if (user && user.name) {
        // User is logged in - hide login icon, show user name
        if (loginIcon) loginIcon.style.display = 'none';
        if (navUser) {
          navUser.style.display = 'flex';
          const firstName = user.name.split(' ')[0];
          if (navUserName) navUserName.textContent = firstName;

          // Show avatar if available
          if (user.avatar && navUserIcon) {
            navUserIcon.outerHTML = '<img src="' + user.avatar + '" alt="" class="user-avatar" id="navUserIcon">';
          }
        }
      } else {
        // User is not logged in - show login icon, hide user name
        if (loginIcon) loginIcon.style.display = 'flex';
        if (navUser) navUser.style.display = 'none';
      }
    } catch (error) {
      console.error('Error updating nav user:', error);
      // Default to logged out state
      const loginIcon = document.getElementById('loginIcon');
      const navUser = document.getElementById('navUser');
      if (loginIcon) loginIcon.style.display = 'flex';
      if (navUser) navUser.style.display = 'none';
    }
  }

  // Global goToCheckout function (Buy Now)
  async function goToCheckout() {
    try {
      if (!window.globalSelectedSize) {
        showToast('Please select a size', 'warning');
        return;
      }
      if (!window.globalSelectedColor) {
        showToast('Please select a color', 'warning');
        return;
      }

      const p = window.globalCurrentProduct;

      // Check if selected size/color is in stock
      const sizeInStock = p.availableSizes && p.availableSizes.includes(window.globalSelectedSize);
      const colorInStock = p.availableColors && p.availableColors.includes(window.globalSelectedColor);
      if (!sizeInStock || !colorInStock) {
        showToast('Sorry, this combination is out of stock. Please select a different size or color.', 'error');
        return;
      }

      // Get selected quantity
      const quantityInput = document.getElementById('quantityInput');
      const quantity = quantityInput ? (parseInt(quantityInput.value) || 1) : 1;

      // Create Buy Now item - store in sessionStorage for checkout
      const buyNowItem = {
        id: p.id || `${p.name}_${Date.now()}`,
        productId: p.id,
        productIndex: p.productIndex,
        name: p.name,
        price: p.price || 999,
        selectedSize: window.globalSelectedSize,
        selectedColor: window.globalSelectedColor,
        image: p.images[0],
        thumbImage: p.images[0],
        quantity: quantity
      };

      // Store in sessionStorage for checkout page to use
      // Item will be added to cart only if checkout is cancelled or payment fails
      sessionStorage.setItem('buyNowItem', JSON.stringify(buyNowItem));

      // Redirect to checkout with buyNow flag
      window.location.href = 'checkout.html?buyNow=true';
    } catch (error) {
      console.error('Error during checkout:', error);
      showToast('Failed to proceed to checkout: ' + (error.message || 'Please try again'), 'error');
    }
  }

  // Toggle Wishlist via API
  async function toggleWishlist() {
    try {
      const wishlistBtn = document.getElementById('wishlistBtn');
      const wishlistIcon = document.getElementById('wishlistIcon');
      const p = window.globalCurrentProduct;

      if (!p) return;

      // Try to check if already in wishlist via API
      let isInWishlist = false;
      try {
        isInWishlist = await API.wishlist.isInWishlist(p.productIndex);
      } catch (error) {
        // If error (likely not logged in), redirect to login
        showToast('Please login to add items to your wishlist', 'warning');
        window.location.href = 'login.html?redirect=' + encodeURIComponent(window.location.href);
        return;
      }

      if (isInWishlist) {
        // Remove from wishlist
        const wishlistData = await API.wishlist.get();
        if (wishlistData.requiresLogin) {
          showToast('Please login to manage your wishlist', 'warning');
          window.location.href = 'login.html?redirect=' + encodeURIComponent(window.location.href);
          return;
        }
        const wishlistItems = wishlistData.wishlist || [];
        const itemToRemove = wishlistItems.find(item => item.productId === p.productIndex || item.productIndex === p.productIndex);
        if (itemToRemove) {
          await API.wishlist.remove(itemToRemove.id);
        }
        if (wishlistBtn) wishlistBtn.classList.remove('active');
        if (wishlistIcon) wishlistIcon.className = 'ri-heart-line';
        if (wishlistBtn) wishlistBtn.title = 'Add to Wishlist';
        showToast('Removed from wishlist', 'success');
      } else {
        // Add to wishlist via API
        const wishlistItem = {
          productId: p.id,
          productIndex: p.productIndex,
          name: p.name,
          price: p.price || 999,
          image: p.images[0]
        };
        const result = await API.wishlist.add(wishlistItem);
        if (result.requiresLogin) {
          showToast('Please login to add items to your wishlist', 'warning');
          window.location.href = 'login.html?redirect=' + encodeURIComponent(window.location.href);
          return;
        }
        if (wishlistBtn) wishlistBtn.classList.add('active');
        if (wishlistIcon) wishlistIcon.className = 'ri-heart-fill';
        if (wishlistBtn) wishlistBtn.title = 'Remove from Wishlist';
        showToast('Added to wishlist', 'success');
      }
    } catch (error) {
      console.error('Error toggling wishlist:', error);
      // Check if it's an auth error
      if (error.message === 'NOT_AUTHENTICATED' || (error.message && (error.message.includes('401') || error.message.includes('auth') || error.message.includes('login')))) {
        showToast('Please login to manage your wishlist', 'warning');
        window.location.href = 'login.html?redirect=' + encodeURIComponent(window.location.href);
      } else {
        showToast('Failed to update wishlist. Please try again.', 'error');
      }
    }
  }

  // Quantity Selector Functions
  function changeQuantity(change) {
    try {
      const quantityInput = document.getElementById('quantityInput');
      if (!quantityInput) return;

      let currentValue = parseInt(quantityInput.value) || 1;
      let newValue = currentValue + change;

      // Ensure quantity stays within bounds
      if (newValue < 1) newValue = 1;
      if (newValue > 99) newValue = 99;

      quantityInput.value = newValue;
    } catch (error) {
      console.error('Error changing quantity:', error);
    }
  }

  // Attach event listeners for product action buttons
  function attachProductEventListeners() {
    // Buy Now button
    const buyBtn = document.getElementById('buyBtn');
    if (buyBtn) {
      buyBtn.addEventListener('click', function(e) {
        e.preventDefault();
        goToCheckout();
      });
    }
    
    // Quantity decrease button
    const decreaseBtn = document.getElementById('decreaseQty');
    if (decreaseBtn) {
      decreaseBtn.addEventListener('click', function(e) {
        e.preventDefault();
        changeQuantity(-1);
      });
    }
    
    // Quantity increase button
    const increaseBtn = document.getElementById('increaseQty');
    if (increaseBtn) {
      increaseBtn.addEventListener('click', function(e) {
        e.preventDefault();
        changeQuantity(1);
      });
    }
    
    // Wishlist button
    const wishlistBtn = document.getElementById('wishlistBtn');
    if (wishlistBtn) {
      wishlistBtn.addEventListener('click', function(e) {
        e.preventDefault();
        toggleWishlist();
      });
    }
  }

  // Check if product is in wishlist on load via API
  async function checkWishlistStatus() {
    const wishlistBtn = document.getElementById('wishlistBtn');
    const wishlistIcon = document.getElementById('wishlistIcon');
    const p = window.globalCurrentProduct;
    
    if (!p || !wishlistBtn) return;
    
    try {
      const isInWishlist = await API.wishlist.isInWishlist(p.productIndex);
      
      if (isInWishlist) {
        wishlistBtn.classList.add('active');
        wishlistIcon.className = 'ri-heart-fill';
        wishlistBtn.title = 'Remove from Wishlist';
      }
    } catch (error) {
      console.log('Wishlist check failed, user may not be logged in');
    }
  }

  // Expose functions globally for cross-script access
  window.toggleWishlist = toggleWishlist;
  window.checkWishlistStatus = checkWishlistStatus;
  window.attachProductEventListeners = attachProductEventListeners;
  window.goToCheckout = goToCheckout;
  window.changeQuantity = changeQuantity;

  // Update cart count on page load
  updateCartCount();

  // Listen for storage changes (when adding to cart)
  window.addEventListener('storage', updateCartCount);

  // Cart icon will navigate via href link
  // Login icon will navigate via href link to login.html
</script>
<!-- Fullscreen Menu End-->

<main class="main">
  <!-- Product Details Section -->
  <div id="productDetailsContainer">
    <!-- This will be populated by JavaScript -->
  </div>
</main>

<!-- Product Information Sections -->
<section class="product-info-sections">
  <!-- Delivery Information Section -->
  <div class="info-section delivery-info">
    <div class="section-header">
      <i class="ri-e-bike-line section-icon"></i>
      <h3>Delivery Information</h3>
    </div>
    <div class="info-grid">
      <div class="info-item">
        <i class="ri-truck-line info-icon"></i>
        <div class="info-content">
          <h4>Free Shipping</h4>
          <p>On All Orders</p>
        </div>
      </div>
      <div class="info-item">
        <i class="ri-time-line info-icon"></i>
        <div class="info-content">
          <h4>Fast Delivery</h4>
          <p>2-5 business days</p>
        </div>
      </div>
      <div class="info-item">
        <i class="ri-refresh-line info-icon"></i>
        <div class="info-content">
          <h4>Easy Returns & Exchange</h4>
          <p>7-day return | 2-day exchange</p>
        </div>
      </div>
    </div>
  </div>

  <!-- Product Care Instructions -->
  <div class="info-section care-instructions">
    <div class="section-header">
      <i class="ri-shirt-line section-icon"></i>
      <h3>Care Instructions</h3>
    </div>
    <div class="care-grid">
      <div class="care-item">
        <i class="ri-drop-line care-icon"></i>
        <div class="care-content">
          <h4>Washing</h4>
          <p>Machine wash cold, no bleach</p>
        </div>
      </div>
      <div class="care-item">
        <i class="ri-sun-line care-icon"></i>
        <div class="care-content">
          <h4>Drying</h4>
          <p>Tumble dry low</p>
        </div>
      </div>
      <div class="care-item">
        <i class="ri-temp-cold-line care-icon"></i>
        <div class="care-content">
          <h4>Ironing</h4>
          <p>Low iron if needed</p>
        </div>
      </div>
    </div>
  </div>

  <!-- Social Sharing -->
  <div class="info-section social-sharing">
    <div class="section-header">
      <i class="ri-share-line section-icon"></i>
      <h3>Share Product</h3>
    </div>
    <div class="social-buttons">
      <button class="social-btn facebook-btn" id="shareOnFacebookBtn" aria-label="Share on Facebook">
        <i class="ri-facebook-fill"></i>
        <span>Facebook</span>
      </button>
      <button class="social-btn twitter-btn" id="shareOnTwitterBtn" aria-label="Share on Twitter">
        <i class="ri-twitter-fill"></i>
        <span>Twitter</span>
      </button>
      <button class="social-btn whatsapp-btn" id="shareOnWhatsAppBtn" aria-label="Share on WhatsApp">
        <i class="ri-whatsapp-fill"></i>
        <span>WhatsApp</span>
      </button>
      <button class="social-btn instagram-btn" id="shareOnInstagramBtn" aria-label="Share on Instagram">
        <i class="ri-instagram-fill"></i>
        <span>Instagram</span>
      </button>
      <button class="social-btn copy-btn" id="copyLinkBtn" aria-label="Copy link">
        <i class="ri-link"></i>
        <span>Copy Link</span>
      </button>
    </div>
  </div>
</section>

<!-- Footer-->
<footer class="footer" id="contact">
  <div class="logo">
    <img src="assets/img/BLACKONN 004_page-0001.png" style="width:150px;height:50px;" alt="BLACKONN Logo">

    <p style="font-size:16px; line-height:1.6;">
    Each creation that bears our name is more than fabric and thread — it is an embodiment of artistry.</p>
  </div>

  <div>
    <h3>The Atelier</h3>
    <ul>
      <li><a href="about.html">About Us</a></li>
      <li><a href="products.html">Category</a></li>
      <li><a href="contact.html">Contact Info</a></li>
      <li><a href="faq.html">FAQ</a></li>
      <li><a href="products.html">Shop</a></li>
      <li><a href="size-guide.html">Size Guide</a></li>
    </ul>
  </div>

  <div>
    <h3>Regimen</h3>
    <ul>
      <li><a href="cancellation-policy.html">Cancellation Policy</a></li>
      <li><a href="payment-policy.html">Payment Policy</a></li>
      <li><a href="privacy-policy.html">Privacy Policy</a></li>
      <li><a href="refund-policy.html">Refund Policy</a></li>
      <li><a href="return-policy.html">Return Policy</a></li>
      <li><a href="shipping.html">Shipping & Delivery</a></li>
    </ul>
  </div>

  <div>
    <h3>Contact Us</h3>
    <div class="socials">
      <a href="https://www.facebook.com/share/1GhKYo1Bc6/" target="_blank" rel="noopener" aria-label="Facebook">
        <i class="ri-facebook-fill"></i>
      </a>
      <a href="https://www.instagram.com/blackonnindia?igsh=ZXB6azlkM2MzZW82" target="_blank" rel="noopener" aria-label="Instagram">
        <i class="ri-instagram-fill"></i>
      </a>
      <a href="https://wa.me/918420889722" target="_blank" rel="noopener" aria-label="WhatsApp">
        <i class="ri-whatsapp-fill"></i>
      </a>
    </div>
    
    <h3 style="margin-top: 25px;">Newsletter</h3>
    <p style="font-size: 14px; color: #666;">Subscribe for updates & offers</p>
    <form class="newsletter-form" onsubmit="subscribeNewsletter(event)">
      <input type="email" class="newsletter-input" placeholder="Enter your email" required>
      <button type="submit" class="newsletter-btn" aria-label="Subscribe"><i class="ri-arrow-right-line"></i></button>
    </form>
  </div>
</footer>

<div class="bottom">
  © BLACKONN 2025. All rights reserved · <a href="terms.html">Terms & Conditions</a> · <a href="privacy-policy.html">Privacy Policy</a>
</div>

<a href="#" class="scrollup" id="scroll-up" title="Scroll to top">
  <i class="ri-arrow-up-s-line"></i>
</a>

<style>
  * {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
  }

  html {
    scroll-behavior: smooth;
    background: #eef3f8;
  }

  body {
    background: linear-gradient(135deg, #f8fafc 0%, #f1f5f9 50%, #e2e8f0 100%);
    color: #000;
    font-family: 'Lora', serif;
    overflow-x: hidden;
    position: relative;
    min-height: 100vh;
  }

  body::before {
    content: '';
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background:
      radial-gradient(circle at 20% 20%, rgba(59, 130, 246, 0.05) 0%, transparent 50%),
      radial-gradient(circle at 80% 80%, rgba(16, 185, 129, 0.05) 0%, transparent 50%),
      radial-gradient(circle at 40% 60%, rgba(245, 158, 11, 0.05) 0%, transparent 50%);
    pointer-events: none;
    z-index: -1;
  }

  /* Clean Product Detail Wrapper */
  .product-detail-wrapper {
    max-width: 1400px;
    margin: 0 auto;
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 100px;
    align-items: center;
    padding: 120px 60px 80px;
    animation: fadeInUp 1s ease-out;
  }

  @keyframes fadeInUp {
    from {
      opacity: 0;
      transform: translate3d(0, 50px, 0);
    }
    to {
      opacity: 1;
      transform: translate3d(0, 0, 0);
    }
  }

  /* Clean Product Images Section */
  .product-images {
    display: flex;
    flex-direction: column;
    gap: 30px;
    animation: fadeInLeft 1s ease-out 0.2s both;
    height: fit-content;
  }

  /* Ensure thumbnails are always visible below main image */
  .thumbnails {
    display: flex !important;
    gap: 18px;
    overflow-x: auto;
    padding-bottom: 12px;
    scrollbar-width: thin;
    scrollbar-color: rgba(0, 0, 0, 0.3) transparent;
    order: 2;
    flex-wrap: wrap;
    justify-content: flex-start;
  }

  .main-image-wrap {
    order: 1;
  }

  @keyframes fadeInLeft {
    from {
      opacity: 0;
      transform: translate3d(-60px, 0, 0);
    }
    to {
      opacity: 1;
      transform: translate3d(0, 0, 0);
    }
  }

  .back-link {
    display: inline-flex;
    align-items: center;
    gap: 12px;
    color: #374151;
    text-decoration: none;
    margin-bottom: 25px;
    font-size: 0.95rem;
    transition: transform 0.4s ease, color 0.4s ease, background 0.4s ease;
    width: fit-content;
    padding: 12px 20px;
    background: #ffffff;
    border: 1px solid #e5e7eb;
    border-radius: 12px;
    box-shadow: 0 4px 16px rgba(0, 0, 0, 0.08);
    will-change: transform;
  }

  .back-link:hover {
    color: #1f2937;
    background: rgba(0, 0, 0, 0.05);
    transform: translate3d(-4px, 0, 0);
  }

  .main-image-wrap {
    width: 100%;
    aspect-ratio: 0.85 / 1;
    overflow: hidden;
    border-radius: 20px;
    background: transparent;
    display: flex;
    align-items: center;
    justify-content: center;
    position: relative;
    will-change: transform;
  }

  .main-image-wrap img {
    width: 100%;
    height: 100%;
    object-fit: cover;
    transition: transform 0.6s ease, filter 0.6s ease;
    filter: brightness(1.02) contrast(1.05);
    will-change: transform;
    backface-visibility: hidden;
    -webkit-backface-visibility: hidden;
    transform: translate3d(0, 0, 0);
  }

  .main-image-wrap:hover img {
    transform: scale3d(1.15, 1.15, 1);
    filter: brightness(1.05) contrast(1.08);
  }

  .main-image-wrap img.zoomed {
    transform: scale3d(1.15, 1.15, 1);
    filter: brightness(1.05) contrast(1.08);
  }

  /* Thumbnails - Always show below main image */
  .thumbnails {
    display: flex !important;
    gap: 18px;
    overflow-x: auto;
    padding: 15px 0;
    scrollbar-width: thin;
    scrollbar-color: rgba(0, 0, 0, 0.3) transparent;
    order: 2;
    flex-wrap: wrap;
    justify-content: flex-start;
    visibility: visible !important;
  }

  .thumbnails::-webkit-scrollbar {
    height: 8px;
  }

  .thumbnails::-webkit-scrollbar-track {
    background: rgba(0, 0, 0, 0.05);
    border-radius: 4px;
  }

  .thumbnails::-webkit-scrollbar-thumb {
    background: linear-gradient(90deg, rgba(0, 0, 0, 0.3) 0%, rgba(0, 0, 0, 0.6) 100%);
    border-radius: 4px;
  }

  .thumbnails::-webkit-scrollbar-thumb:hover {
    background: linear-gradient(90deg, rgba(0, 0, 0, 0.5) 0%, rgba(0, 0, 0, 0.8) 100%);
  }

  .thumbnail {
    width: 95px;
    height: 95px;
    border-radius: 14px;
    overflow: hidden;
    cursor: pointer;
    border: none;
    transition: transform 0.4s ease, box-shadow 0.4s ease;
    flex-shrink: 0;
    position: relative;
    background: linear-gradient(135deg, rgba(255, 255, 255, 0.1) 0%, rgba(0, 0, 0, 0.05) 100%);
    will-change: transform;
    backface-visibility: hidden;
    -webkit-backface-visibility: hidden;
  }

  .thumbnail img {
    width: 100%;
    height: 100%;
    object-fit: cover;
    transition: transform 0.3s ease;
    will-change: transform;
    backface-visibility: hidden;
    -webkit-backface-visibility: hidden;
  }

  .thumbnail:hover {
    transform: translate3d(0, -2px, 0);
    box-shadow: 0 8px 20px rgba(0, 0, 0, 0.15);
  }

  .thumbnail:hover img {
    transform: scale3d(1.02, 1.02, 1);
  }

  .thumbnail.active {
    box-shadow: 0 0 0 2px rgba(0, 0, 0, 0.15);
    transform: translate3d(0, -2px, 0);
  }

  .thumbnail.active::after {
    content: '';
    position: absolute;
    inset: 0;
    background: linear-gradient(135deg, rgba(0, 0, 0, 0.08) 0%, transparent 100%);
    border-radius: 14px;
  }

  /* Clean Product Info Section */
  .product-info {
    display: flex;
    flex-direction: column;
    gap: 50px;
    animation: fadeInRight 1s ease-out 0.4s both;
    margin-top: 150px;
  }

  @keyframes fadeInRight {
    from {
      opacity: 0;
      transform: translate3d(60px, 0, 0);
    }
    to {
      opacity: 1;
      transform: translate3d(0, 0, 0);
    }
  }

  .product-header h1 {
    font-size: 3.5rem;
    color: #000;
    margin: 0;
    font-weight: 700;
    line-height: 1.1;
    letter-spacing: -1.5px;
    background: linear-gradient(135deg, #000 0%, #333 100%);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
    margin-bottom: 10px;
  }

  .product-price {
    font-size: 2.2rem;
    color: #0f172a;
    font-weight: 800;
    margin: 20px 0;
    letter-spacing: -0.8px;
    position: relative;
    display: inline-block;
  }

  /* Stock Badge Styling */
  .stock-badge {
    display: inline-block;
    padding: 8px 16px;
    border-radius: 8px;
    font-size: 0.85rem;
    font-weight: 600;
    margin-bottom: 12px;
    letter-spacing: 0.5px;
  }

  .out-of-stock-badge {
    background: #fee2e2;
    color: #dc2626;
    border: 1px solid #fecaca;
  }

  .in-stock-badge {
    background: #d1fae5;
    color: #059669;
    border: 1px solid #a7f3d0;
  }

  .product-header p {
    font-size: 1.2rem;
    color: #555;
    margin: 25px 0 0 0;
    line-height: 1.8;
    font-weight: 400;
    opacity: 0.9;
  }

  /* Clean Option Groups */
  .option-group {
    display: flex;
    flex-direction: column;
    gap: 20px;
    animation: fadeInUp 1s ease-out 0.6s both;
  }

  .option-label {
    font-size: 0.9rem;
    color: #000;
    font-weight: 700;
    text-transform: uppercase;
    letter-spacing: 2.5px;
    opacity: 0.9;
    margin-bottom: 5px;
    position: relative;
  }

  /* Enhanced Size Options */
  .size-options {
    display: flex;
    gap: 16px;
    flex-wrap: wrap;
  }

  .size-option {
    padding: 16px 26px;
    border: 2px solid rgba(0, 0, 0, 0.15);
    background: #ffffff;
    color: #000;
    cursor: pointer;
    border-radius: 12px;
    transition: transform 0.4s ease, border-color 0.4s ease, background 0.4s ease, color 0.4s ease;
    font-weight: 600;
    font-size: 1rem;
    position: relative;
    overflow: hidden;
    border: 1px solid #e5e7eb;
    will-change: transform;
  }

  .size-option::before {
    content: '';
    position: absolute;
    inset: 0;
    background: linear-gradient(135deg, rgba(0, 0, 0, 0.05) 0%, rgba(0, 0, 0, 0.02) 100%);
    transform: scaleX(0);
    transform-origin: left;
    transition: transform 0.4s ease;
    z-index: -1;
  }

  .size-option:hover {
    border-color: #000;
    transform: translate3d(0, -3px, 0);
  }

  .size-option:hover::before {
    transform: scaleX(1);
  }

  .size-option.selected {
    background: linear-gradient(135deg, #000 0%, #1a1a1a 100%);
    color: #fff;
    border-color: #000;
    transform: translate3d(0, -2px, 0);
  }

  /* Enhanced Color Options */
  .color-options {
    display: flex;
    gap: 24px;
    flex-wrap: wrap;
  }

  .color-option {
    width: 60px;
    height: 60px;
    border-radius: 50%;
    border: 3px solid rgba(0, 0, 0, 0.12);
    cursor: pointer;
    transition: transform 0.4s ease, border-color 0.4s ease;
    position: relative;
    background: linear-gradient(135deg, rgba(255, 255, 255, 0.1) 0%, rgba(0, 0, 0, 0.05) 100%);
    will-change: transform;
  }

  .color-option::after {
    content: '';
    position: absolute;
    inset: -4px;
    border-radius: 50%;
    border: 3px solid rgba(0, 0, 0, 0);
    transition: border-color 0.2s ease;
  }

  .color-option:hover {
    transform: scale3d(1.1, 1.1, 1);
    border-color: rgba(0, 0, 0, 0.3);
  }

  .color-option.selected {
    border-color: #000;
    transform: scale3d(1.1, 1.1, 1);
  }

  .color-option.selected::after {
    border-color: rgba(0, 0, 0, 0.25);
  }

  /* Out of Stock Options */
  .size-option.out-of-stock-option {
    opacity: 0.6;
    cursor: pointer;
  }

  .size-option.out-of-stock-option:hover {
    border-color: #000;
    transform: translate3d(0, -2px, 0);
  }

  .size-option.out-of-stock-option:hover::before {
    transform: scaleX(1);
  }

  .size-option.out-of-stock-option.selected {
    background: #000;
    color: #fff;
    border-color: #000;
  }

  .color-option.out-of-stock-option {
    opacity: 0.6;
    cursor: pointer;
  }

  .color-option.out-of-stock-option:hover {
    transform: scale3d(1.15, 1.15, 1);
  }

  .color-option.out-of-stock-option.selected {
    border-color: #000;
    transform: scale3d(1.12, 1.12, 1);
  }

  .color-option.out-of-stock-option.selected::after {
    border-color: rgba(0, 0, 0, 0.2);
  }

  /* Enhanced Out of Stock Message */
  .out-of-stock {
    display: none;
    padding: 20px 28px;
    background: transparent;
    border: none;
    color: #dc2626;
    border-radius: 14px;
    text-align: center;
    font-weight: 700;
    font-size: 1.1rem;
    letter-spacing: 0.8px;
    animation: slideDownBounce 0.5s ease-out;
    display: flex;
    align-items: center;
    justify-content: center;
    text-transform: uppercase;
    position: relative;
    overflow: hidden;
  }

  .out-of-stock::before {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.4), transparent);
    animation: shimmer 2s infinite;
  }

  @keyframes slideDownBounce {
    0% {
      opacity: 0;
      transform: translateY(-20px) scale(0.9);
    }
    50% {
      opacity: 1;
      transform: translateY(5px) scale(1.02);
    }
    100% {
      opacity: 1;
      transform: translateY(0) scale(1);
    }
  }

  @keyframes shimmer {
    0% {
      left: -100%;
    }
    100% {
      left: 100%;
    }
  }

  .out-of-stock.show {
    display: block;
  }

  /* Quantity Selector */
  .quantity-section {
    margin-bottom: 30px;
  }

  .quantity-selector {
    display: flex;
    align-items: center;
    gap: 15px;
    margin-top: 15px;
  }

  .quantity-btn {
    width: 40px;
    height: 40px;
    background: #ffffff;
    border: 1px solid #e5e7eb;
    border-radius: 8px;
    cursor: pointer;
    font-size: 1.2rem;
    font-weight: 600;
    color: #000;
    transition: transform 0.3s ease, background 0.3s ease, border-color 0.3s ease;
    display: flex;
    align-items: center;
    justify-content: center;
    will-change: transform;
  }

  .quantity-btn:hover {
    background: #f8f9fa;
    border-color: #000;
    transform: translate3d(0, -2px, 0);
  }

  .quantity-btn:active {
    transform: translate3d(0, 0, 0);
  }

  #quantityInput {
    width: 60px;
    height: 40px;
    border: 1px solid #e5e7eb;
    border-radius: 8px;
    text-align: center;
    font-size: 1rem;
    font-weight: 600;
    background: #ffffff;
    color: #000;
  }

  #quantityInput:focus {
    outline: none;
    border-color: #000;
  }

  /* Enhanced Buy Section */
  .buy-section {
    display: flex;
    gap: 20px;
    margin-top: 30px;
    align-items: center;
  }

  .buy-btn {
    flex: 1;
    padding: 20px 36px;
    background: linear-gradient(135deg, #000 0%, #1a1a1a 50%, #000 100%);
    color: #fff;
    border: none;
    border-radius: 16px;
    font-size: 1.1rem;
    font-weight: 700;
    cursor: pointer;
    transition: transform 0.4s ease, box-shadow 0.4s ease;
    text-decoration: none;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    position: relative;
    overflow: hidden;
    letter-spacing: 0.8px;
    box-shadow: 0 8px 24px rgba(0, 0, 0, 0.15);
    text-transform: uppercase;
    min-height: 56px;
    will-change: transform;
  }

  .buy-btn::before {
    content: '';
    position: absolute;
    inset: 0;
    background: linear-gradient(135deg, rgba(255, 255, 255, 0.15) 0%, transparent 40%, rgba(0, 0, 0, 0.05) 100%);
    transform: translate3d(-100%, 0, 0);
    transition: transform 0.4s ease;
  }

  .buy-btn:hover {
    transform: translate3d(0, -2px, 0);
    box-shadow: 0 12px 32px rgba(0, 0, 0, 0.2);
  }

  .buy-btn:hover::before {
    transform: translate3d(0, 0, 0);
  }

  .buy-btn:active {
    transform: translate3d(0, 0, 0);
  }

  .buy-btn:disabled {
    background: linear-gradient(135deg, #666 0%, #555 100%);
    cursor: not-allowed;
    opacity: 0.6;
    box-shadow: none;
    transform: none;
  }

  .add-cart-btn {
    padding: 14px 22px;
    font-size: 0.95rem;
    font-weight: 600;
    color: #000;
    background: transparent;
    border: 1.5px solid #000;
    border-radius: 10px;
    cursor: pointer;
    display: inline-flex;
    align-items: center;
    gap: 8px;
    min-height: 52px;
    position: relative;
    overflow: hidden;
    transition: color 0.3s ease,
                transform 0.3s ease,
                box-shadow 0.3s ease;
    will-change: transform;
    backface-visibility: hidden;
    -webkit-backface-visibility: hidden;
  }

  .add-cart-btn::before {
    content: '';
    position: absolute;
    inset: 0;
    background: #000;
    transform: scaleX(0);
    transform-origin: left;
    transition: transform 0.35s ease;
    z-index: -1;
  }

  .add-cart-btn:hover {
    color: #fff;
    transform: translate3d(0, -3px, 0);
    box-shadow: 0 10px 30px rgba(0, 0, 0, 0.15);
  }

  .add-cart-btn:hover::before {
    transform: scaleX(1);
  }

  .add-cart-btn:hover i {
    animation: cartBounce 0.5s ease;
  }

  @keyframes cartBounce {
    0%, 100% { transform: translate3d(0, 0, 0); }
    25% { transform: translate3d(-2px, -2px, 0); }
    50% { transform: translate3d(0, -4px, 0); }
    75% { transform: translate3d(2px, -2px, 0); }
  }

  .add-cart-btn:active {
    transform: translate3d(0, -1px, 0) scale3d(0.98, 0.98, 1);
    box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
  }

  .add-cart-btn i {
    transition: transform 0.3s ease;
  }

  .wishlist-btn {
    width: 52px;
    height: 52px;
    padding: 0;
    font-size: 1.4rem;
    color: #000;
    background: #fff;
    border: 1.5px solid #e0e0e0;
    border-radius: 10px;
    cursor: pointer;
    transition: transform 0.3s ease, border-color 0.3s ease, box-shadow 0.3s ease;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    flex-shrink: 0;
    position: relative;
    overflow: hidden;
    will-change: transform;
  }

  .wishlist-btn::before {
    content: '';
    position: absolute;
    inset: 0;
    background: radial-gradient(circle at center, rgba(229, 57, 53, 0.15) 0%, transparent 70%);
    transform: scale3d(0, 0, 1);
    transition: transform 0.4s ease;
    border-radius: 10px;
  }

  .wishlist-btn:hover {
    transform: translate3d(0, -3px, 0) scale3d(1.05, 1.05, 1);
    border-color: #e53935;
    box-shadow: 0 8px 25px rgba(229, 57, 53, 0.25);
  }

  .wishlist-btn:hover::before {
    transform: scale3d(1.5, 1.5, 1);
  }

  .wishlist-btn:hover i {
    color: #e53935;
    transform: scale3d(1.15, 1.15, 1);
    transition: transform 0.3s ease, color 0.3s ease;
  }

  .wishlist-btn:active {
    transform: translate3d(0, -1px, 0) scale3d(0.98, 0.98, 1);
  }

  .wishlist-btn i {
    transition: transform 0.3s ease, color 0.3s ease;
    position: relative;
    z-index: 1;
  }

  .wishlist-btn.active {
    background: linear-gradient(135deg, #e53935 0%, #c62828 100%);
    border-color: #e53935;
    color: #fff;
    box-shadow: 0 4px 15px rgba(229, 57, 53, 0.4);
  }

  .wishlist-btn.active i {
    color: #fff;
    animation: heartPulse 0.6s ease;
  }

  @keyframes heartPulse {
    0% { transform: scale3d(1, 1, 1); }
    25% { transform: scale3d(1.3, 1.3, 1); }
    50% { transform: scale3d(0.95, 0.95, 1); }
    75% { transform: scale3d(1.15, 1.15, 1); }
    100% { transform: scale3d(1, 1, 1); }
  }

  .wishlist-btn.active:hover {
    background: linear-gradient(135deg, #c62828 0%, #b71c1c 100%);
    border-color: #c62828;
    transform: translate3d(0, -3px, 0) scale3d(1.05, 1.05, 1);
    box-shadow: 0 8px 25px rgba(229, 57, 53, 0.45);
  }

  .wishlist-btn.active:hover i {
    color: #fff;
    transform: scale(1.1);
  }

  .buy-section {
    display: flex;
    gap: 12px;
    align-items: center;
  }
  @media (max-width: 1024px) {
    .product-detail-wrapper {
      grid-template-columns: 1fr;
      gap: 50px;
      padding: 80px 30px 40px;
    }

    .product-header h1 {
      font-size: 2.5rem;
    }

    .main-image-wrap {
      aspect-ratio: 0.7 / 1;
    }
  }

  @media (max-width: 768px) {
    .product-detail-wrapper {
      gap: 40px;
      padding: 70px 20px 30px;
    }

    .product-header h1 {
      font-size: 2rem;
    }

    .product-header p {
      font-size: 1rem;
    }

    .size-options {
      gap: 10px;
    }

    .size-option {
      padding: 12px 18px;
      font-size: 0.9rem;
    }

    .color-option {
      width: 48px;
      height: 48px;
    }

    .buy-btn {
      padding: 16px 24px;
      font-size: 1rem;
    }

    .product-info {
      gap: 30px;
    }
  }

  @media (max-width: 480px) {
    .product-detail-wrapper {
      gap: 30px;
      padding: 60px 15px 25px;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
    }

    .product-header h1 {
      font-size: 1.6rem;
    }

    .product-header p {
      font-size: 0.95rem;
      line-height: 1.6;
    }

    .main-image-wrap {
      aspect-ratio: 0.75 / 1;
      width: 100%;
      min-height: 320px;
      border-radius: 16px;
      margin: 0 auto;
      display: flex;
      align-items: center;
      justify-content: center;
    }
    
    .main-image-wrap img {
      width: 100%;
      height: 100%;
      object-fit: cover;
      display: block;
      margin: 0 auto;
    }

    /* Thumbnails below main image for mobile */
    .product-images {
      flex-direction: column;
      align-items: center;
      width: 100%;
      justify-content: center;
    }
    
    .product-info {
      width: 100%;
      text-align: center;
      align-items: center;
      display: flex;
      flex-direction: column;
    }

    .thumbnails {
      order: 2;
      display: flex;
      gap: 12px;
      justify-content: center;
      flex-wrap: wrap;
      padding: 15px 0;
    }

    .thumbnail {
      width: 70px;
      height: 70px;
    }

    .size-option {
      padding: 10px 16px;
      font-size: 0.85rem;
    }

    .color-option {
      width: 42px;
      height: 42px;
    }

    .buy-section {
      flex-direction: column;
      gap: 12px;
      align-items: center;
    }

    .buy-btn {
      padding: 14px 20px;
      font-size: 0.95rem;
    }

    .back-link {
      display: inline-flex;
      justify-content: flex-start;
      text-align: left;
      width: fit-content;
      margin-left: 0;
      padding: 10px 16px;
      font-size: 0.9rem;
    }
    
    .product-images {
      display: flex;
      flex-direction: column;
      align-items: flex-start;
    }
  }

  /* Zoom Modal Styles - DEPRECATED, using inline navigation instead */
  /* Keeping minimal styles for backwards compatibility */
  .zoom-modal { display: none !important; }

  /* ========================================
     PRODUCT IMAGE NAVIGATION (SCRATCH REBUILD)
     ======================================== */
  .main-image-wrap {
    position: relative;
    overflow: hidden;
  }
  
  /* Navigation arrow - invisible and offset for slide-in animation */
  .image-nav-arrow {
    position: absolute;
    top: 50%;
    width: 44px;
    height: 44px;
    background: rgba(0, 0, 0, 0.75) !important;
    border: none;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    z-index: 25;
    opacity: 0;
    visibility: hidden;
    pointer-events: none;
    transition: opacity 0.4s ease, transform 0.4s ease, visibility 0.4s ease !important;
    overflow: hidden;
  }
  
  /* Kill the global button shine effect */
  .image-nav-arrow::after {
    display: none !important;
    content: none !important;
  }
  
  .image-nav-arrow i {
    color: #ffffff;
    font-size: 24px;
    line-height: 1;
  }
  
  /* Starting positions: offset to the sides */
  .image-nav-arrow.prev {
    left: 20px;
    transform: translateY(-50%) translateX(-30px) !important;
  }
  
  .image-nav-arrow.next {
    right: 20px;
    transform: translateY(-50%) translateX(30px) !important;
  }
  
  /* Interaction: Slide in and fade in on image hover */
  .main-image-wrap:hover .image-nav-arrow {
    opacity: 1;
    visibility: visible;
    pointer-events: auto;
    transform: translateY(-50%) translateX(0) !important;
  }
  
  /* Disabled state: SAME position as enabled arrows, just faded */
  .main-image-wrap:hover .image-nav-arrow:disabled {
    opacity: 0.15;
    transform: translateY(-50%) translateX(0) !important;
    cursor: default;
  }
  
  /* COMPLETELY remove any hover effect on the arrows themselves */
  .image-nav-arrow:hover,
  .image-nav-arrow:hover:not(:disabled),
  .image-nav-arrow:focus,
  .image-nav-arrow:active {
    background: rgba(0, 0, 0, 0.75) !important;
    transform: translateY(-50%) translateX(0) !important;
  }
  
  /* Image change fade effect */
  #mainImage {
    transition: transform 0.6s ease, filter 0.6s ease, opacity 0.25s ease !important;
  }
  
  #mainImage.changing {
    opacity: 0.35;
  }
  
  /* Image counter */
  .image-counter {
    position: absolute;
    bottom: 15px;
    left: 50%;
    transform: translateX(-50%);
    background: rgba(0, 0, 0, 0.6);
    color: white;
    padding: 6px 16px;
    border-radius: 20px;
    font-size: 13px;
    font-weight: 500;
    z-index: 20;
    opacity: 0;
    transition: opacity 0.3s ease;
  }
  
  .main-image-wrap:hover .image-counter {
    opacity: 1;
  }
  
  /* Mobile: arrows always visible, centered, no animation needed */
  @media (max-width: 768px) {
    .image-nav-arrow {
      opacity: 1;
      visibility: visible;
      pointer-events: auto;
      width: 38px;
      height: 38px;
    }
    
    .image-nav-arrow,
    .image-nav-arrow.prev,
    .image-nav-arrow.next,
    .image-nav-arrow:hover,
    .image-nav-arrow:disabled {
      transform: translateY(-50%) translateX(0) !important;
    }
    
    .image-nav-arrow.prev {
      left: 15px;
    }
    
    .image-nav-arrow.next {
      right: 15px;
    }
    
    .image-nav-arrow i {
      font-size: 20px;
    }

    .image-nav-arrow:disabled {
      opacity: 0.15;
    }
    
    .image-counter {
      opacity: 1;
      bottom: 10px;
      padding: 4px 12px;
      font-size: 11px;
    }
  }
  
  /* Hide old zoom modal */
  .zoom-modal { display: none !important; }
  
  .main-image-wrap.zoomable {
    cursor: default;
  }

  .main-image-wrap.zoomable:hover {
    opacity: 1;
  }

  @media (max-width: 768px) {
    .zoom-modal-content {
      width: 95%;
      max-height: 80vh;
    }

    .zoom-close {
      width: 40px;
      height: 40px;
      font-size: 20px;
      top: -35px;
    }

    .zoom-controls {
      bottom: 15px;
      padding: 10px 15px;
    }

    .zoom-btn {
      width: 35px;
      height: 35px;
      font-size: 14px;
    }

    .zoom-level {
      font-size: 12px;
      width: 40px;
    }
  }
</style>

<script>
  // Static Store for GitHub Pages - No backend required
  let products = [];
  let curr = 0;
  let selectedSize = null;
  let selectedColor = null;

  // Local SVG placeholder generator - no external service needed
  function getPlaceholder(width = 100, height = 100, text = 'No Image') {
    const svg = `<svg xmlns="http://www.w3.org/2000/svg" width="${width}" height="${height}" viewBox="0 0 ${width} ${height}">
      <rect fill="#f0f0f0" width="${width}" height="${height}"/>
      <text fill="#999" font-family="Arial,sans-serif" font-size="${Math.min(width, height) / 8}" text-anchor="middle" x="${width/2}" y="${height/2}" dy=".3em">${text}</text>
    </svg>`;
    return 'data:image/svg+xml,' + encodeURIComponent(svg);
  }

  // Convert API product to display format
  function convertApiProduct(apiProduct) {
    // Normalize upload URLs saved by admin (support /api/uploads and /uploads)
    function normalizeUploadUrl(u) {
      if (!u || u === 'undefined') return '/assets/img/placeholder.png';
      if (u.startsWith('/api/uploads')) return u.replace('/api/uploads', '/uploads');
      return u;
    }
    // Build images array from main image and thumbImages array (or old thumbImage)
    const images = [];
    
    // Handle new thumbImages array - use this as primary source if available
    if (apiProduct.thumbImages && Array.isArray(apiProduct.thumbImages) && apiProduct.thumbImages.length > 0) {
      apiProduct.thumbImages.forEach(thumb => {
        const nThumb = normalizeUploadUrl(thumb);
        if (nThumb && !images.includes(nThumb)) {
          images.push(nThumb);
        }
      });
    } else {
      // Fallback to main image + thumbImage if no thumbImages array
      if (apiProduct.image) images.push(normalizeUploadUrl(apiProduct.image));
      if (apiProduct.thumbImage && apiProduct.thumbImage !== apiProduct.image) {
        images.push(normalizeUploadUrl(apiProduct.thumbImage));
      }
    }
    
    // Add placeholder if no images
    if (images.length === 0) {
      images.push(getPlaceholder(800, 800, 'Product'));
    }
    
    // All possible sizes and colors (must match admin page options exactly)
    const allSizes = ["XS", "S", "M", "L", "XL", "XXL"];
    const allColors = [
      { name: "Black", hex: "#000000" },
      { name: "White", hex: "#ffffff" },
      { name: "Red", hex: "#dc2626" },
      { name: "Blue", hex: "#2563eb" },
      { name: "Navy", hex: "#1e3a5f" },
      { name: "Grey", hex: "#6b7280" },
      { name: "Gray", hex: "#6b7280" } // Alias for Grey
    ];
    
    // Determine available sizes - prefer new availableSizes array from admin
    let availableSizes = [];
    if (apiProduct.availableSizes && Array.isArray(apiProduct.availableSizes) && apiProduct.availableSizes.length > 0) {
      // Use the exact availableSizes from admin
      availableSizes = apiProduct.availableSizes;
    } else {
      // Fallback to parsing old size field
      const sizeValue = (apiProduct.size || '').toUpperCase().trim();
      if (sizeValue === 'ALL' || sizeValue === 'ONE SIZE' || sizeValue === 'FREE SIZE') {
        availableSizes = [...allSizes];
      } else if (sizeValue && allSizes.map(s => s.toUpperCase()).includes(sizeValue)) {
        availableSizes = [sizeValue];
      } else if (sizeValue && sizeValue !== '') {
        availableSizes = [...allSizes]; // Non-standard size - show all
      } else {
        availableSizes = [];
      }
    }

    // Determine available colors - prefer new availableColors array from admin
    let availableColors = [];
    if (apiProduct.availableColors && Array.isArray(apiProduct.availableColors) && apiProduct.availableColors.length > 0) {
      // Use the exact availableColors from admin (these are color names like "Black", "Red")
      // Convert to hex values for display
      apiProduct.availableColors.forEach(colorName => {
        const colorObj = allColors.find(c => c.name.toLowerCase() === colorName.toLowerCase());
        if (colorObj) {
          availableColors.push(colorObj.hex);
        } else {
          // If color name doesn't match, it might already be a hex value
          if (colorName.startsWith('#')) {
            availableColors.push(colorName);
          }
        }
      });
    } else {
      // Fallback to parsing old color field
      const colorValue = (apiProduct.color || '').toLowerCase().trim();
      if (colorValue === 'all') {
        availableColors = allColors.map(c => c.hex);
      } else if (colorValue && colorValue !== '') {
        const colorParts = colorValue.split(/,|\s+and\s+/).map(c => c.trim());
        colorParts.forEach(part => {
          const colorObj = allColors.find(c => c.name.toLowerCase() === part);
          if (colorObj) {
            availableColors.push(colorObj.hex);
          }
        });
        if (availableColors.length === 0) {
          const singleColor = allColors.find(c => c.name.toLowerCase() === colorValue);
          if (singleColor) {
            availableColors.push(singleColor.hex);
          }
        }
      } else {
        availableColors = [];
      }
    }

    // Get first thumbnail for cart/listing display
    const firstThumb = (apiProduct.thumbImages && apiProduct.thumbImages.length > 0) 
      ? normalizeUploadUrl(apiProduct.thumbImages[0]) 
      : normalizeUploadUrl(apiProduct.thumbImage || apiProduct.image);

    // Check inventory and stock status from admin
    const inventory = apiProduct.stock || 0;
    const isOutOfStockByAdmin = apiProduct.isOutOfStock || apiProduct.stockStatus === 'out-of-stock';
    const isOutOfStockByInventory = inventory === 0;
    const isOutOfStock = isOutOfStockByAdmin || isOutOfStockByInventory;

    return {
      id: apiProduct.id,
      name: apiProduct.name || 'Product',
      desc: apiProduct.desc || apiProduct.description || `Premium ${apiProduct.name || 'product'} with quality materials.`,
      price: apiProduct.price || 0,
      wa: "https://wa.me/918420889722",
      sizes: allSizes,              // Show ALL sizes in UI
      colors: allColors.map(c => c.hex), // Show ALL colors in UI
      availableSizes: isOutOfStock ? [] : availableSizes,    // Empty if out of stock
      availableColors: isOutOfStock ? [] : availableColors,  // Empty if out of stock
      images: images,
      stock: inventory,
      isOutOfStock: isOutOfStock,
      stockStatus: apiProduct.stockStatus || (isOutOfStock ? 'out-of-stock' : 'in-stock'),
      thumbImage: firstThumb,
      thumbImages: apiProduct.thumbImages || []
    };
  }

  // Embedded products data (no fetch required - GitHub Pages compatible)
  const EMBEDDED_PRODUCTS = [
    { id: "prod-001", name: "Over Sized T-Shirt", price: 1499, color: "Black", size: "All", description: "Comfortable oversized t-shirt made from premium cotton. Perfect for casual wear with a relaxed fit.", stock: 100, position: 1, image: "/uploads/products/1766256485041_oorxuo.png", thumbImages: ["/uploads/products/1766256485041_oorxuo.png", "/uploads/products/1766300543944_lcdhiw.png"] },
    { id: "prod-002", name: "Slim Fit T-Shirt", price: 599, color: "Red and Blue", size: "All", description: "Slim fit t-shirt available in red and blue. Made from breathable fabric for all-day comfort.", stock: 150, position: 2, image: "/uploads/products/1766256517720_hcxarp.png", thumbImages: ["/uploads/products/1766256517720_hcxarp.png", "/uploads/products/1766304774184_nz59z8.png"] },
    { id: "prod-003", name: "CAP", price: 399, color: "Black", size: "All", description: "Classic black cap with adjustable strap. Made from durable materials for everyday use.", stock: 200, position: 3, image: "/uploads/products/1766256568248_klqmvk.png", thumbImages: ["/uploads/products/1766256568248_klqmvk.png", "/uploads/products/1766305297632_oepikm.png"] },
    { id: "prod-004", name: "BAG", price: 1799, color: "Black", size: "One Size", description: "Stylish black bag with multiple compartments. Perfect for carrying essentials with style.", stock: 75, position: 4, image: "/uploads/products/1766256649355_hpnrsv.png", thumbImages: ["/uploads/products/1766256649355_hpnrsv.png", "/uploads/products/1766305433978_ro3m77.png"] },
    { id: "prod-005", name: "Hoodie", price: 1999, color: "Black", size: "All", description: "Cozy black hoodie made from soft fleece. Ideal for layering and staying warm.", stock: 80, position: 5, image: "/uploads/products/1766256703180_kqw3g7.png", thumbImages: ["/uploads/products/1766256703180_kqw3g7.png", "/uploads/products/1766305203633_pi904w.png"] },
    { id: "prod-006", name: "Pants", price: 1299, color: "All", size: "All", description: "Versatile pants available in multiple colors. Comfortable fit for various occasions.", stock: 120, position: 6, image: "/uploads/products/1766258492979_8sibcs.png", thumbImages: ["/uploads/products/1766258492979_8sibcs.png", "/uploads/products/1766305507705_rtn6gs.png"] }
  ];

  // Load products from API
  async function fetchProducts() {
    try {
      // Show skeleton loader
      const container = document.getElementById('productDetailsContainer');
      if (container) {
        container.innerHTML = `
          <div class="product-detail-wrapper" style="gap: 40px;">
            <div class="product-images skeleton" style="height: 500px; border-radius: 12px;"></div>
            <div class="product-info" style="gap: 20px;">
              <div class="skeleton" style="height: 40px; width: 60%; border-radius: 8px;"></div>
              <div class="skeleton" style="height: 30px; width: 30%; border-radius: 8px;"></div>
              <div class="skeleton" style="height: 100px; width: 100%; border-radius: 8px;"></div>
              <div class="skeleton" style="height: 60px; width: 100%; border-radius: 8px;"></div>
              <div class="skeleton" style="height: 60px; width: 100%; border-radius: 8px;"></div>
              <div class="skeleton" style="height: 50px; width: 100%; border-radius: 8px;"></div>
            </div>
          </div>
        `;
      }

      // Fetch products from API only
      const response = await API.products.getAll();

      // Debug mode: show raw API response in-page when ?debug=1 is present
      try {
        const _params = new URLSearchParams(window.location.search);
        if (_params.get('debug') === '1') {
          const containerDebug = document.getElementById('productDetailsContainer') || document.body;
          containerDebug.innerHTML = `\n            <div style="padding:18px;background:#fff;border:1px solid #ddd;max-height:72vh;overflow:auto;white-space:pre-wrap;">\n              <h3 style="margin:0 0 8px 0;font-size:16px;">DEBUG: /api/products response</h3>\n              <pre style="font-size:12px;">${JSON.stringify(response, null, 2)}</pre>\n            </div>`;
          // continue rendering below so debug + UI are visible
        }
      } catch (e) {
        console.warn('[PRODUCTS] debug UI failed', e);
      }

      if (response && response.products && response.products.length > 0) {
        products = response.products.map(convertApiProduct);
      } else {
        products = [];
      }

      initializeProductPage();
    } catch (error) {
      console.error('Error fetching products:', error);
      products = [];
      const container = document.getElementById('productDetailsContainer');
      if (container) {
        container.innerHTML = `
          <div style="text-align: center; padding: 60px 20px;">
            <i class="ri-error-warning-line" style="font-size: 48px; color: #e74c3c;"></i>
            <h2 style="color: #333; margin-top: 20px;">Unable to Load Products</h2>
            <p style="color: #666; margin-top: 10px;">Please check your connection and try again.</p>
            <button onclick="location.reload()" style="margin-top: 20px; padding: 12px 24px; background: #000; color: #fff; border: none; border-radius: 8px; cursor: pointer;">
              Retry
            </button>
          </div>
        `;
      }
    }
  }

  function initializeProductPage() {
    try {
      // Get product ID from URL
      const urlParams = new URLSearchParams(window.location.search);
      const productIdParam = urlParams.get('id');

      // Find product by ID (could be UUID or index)
      let productIndex = -1;

      if (productIdParam) {
        // Try to find by ID first
        productIndex = products.findIndex(p => p.id === productIdParam);

        // If not found, try as numeric index
        if (productIndex === -1) {
          const numId = parseInt(productIdParam);
          if (!isNaN(numId) && numId >= 0 && numId < products.length) {
            productIndex = numId;
          }
        }
      }

      if (productIndex === -1) productIndex = 0;

      if (products.length > 0) {
        curr = productIndex;
        renderProduct(productIndex);
      } else {
        const container = document.getElementById('productDetailsContainer');
        if (container) {
          container.innerHTML = '<p>No products available. <a href="index.html">Go back to shop</a></p>';
        }
      }
    } catch (error) {
      console.error('Error initializing product page:', error);
      const container = document.getElementById('productDetailsContainer');
      if (container) {
        container.innerHTML = '<p>Error loading product. <a href="index.html">Go back to shop</a></p>';
      }
    }
  }

  // Initialize on page load
  // Since script is at end, DOM is ready, call directly
  updateMenuLoginIcon();
  updateCartCount();
  updateNavUser();

  // Listen for storage changes (login/logout from other tabs)
  window.addEventListener('storage', updateNavUser);

  // Load products and initialize page
  fetchProducts();

  function renderProduct(index) {
    const p = products[index];
    const container = document.getElementById('productDetailsContainer');
    
    // Reset quantity to 1 for new product
    const quantityInput = document.getElementById('quantityInput');
    if (quantityInput) {
      quantityInput.value = 1;
    }
    
    // Format price display
    const priceDisplay = p.price ? `₹${p.price.toLocaleString()}` : '₹999';
    
    const html = `
      <div class="product-detail-wrapper animate-fade-up">
        <!-- Left Side: Images -->
        <div class="product-images">
          <a href="index.html#shop" class="back-link">
            <i class="ri-arrow-left-line"></i> Back to Shop
          </a>
          <div class="main-image-wrap hover-scale">
            <img id="mainImage" src="${p.images && p.images[0] ? p.images[0] : getPlaceholder(800,800,'Product')}" alt="${p.name}" loading="eager" fetchpriority="high" decoding="async" onerror="this.src=getPlaceholder(800,800,'${p.name.replace(/'/g, '')}')">
          </div>
          <div class="thumbnails" id="thumbsContainer"></div>
        </div>

        <!-- Right Side: Details -->
        <div class="product-info">
          <div class="product-header">
            <h1>${p.name}</h1>
            <div class="product-price">${priceDisplay}</div>
            <p>${p.desc}</p>
          </div>

          <div class="option-group">
            <label class="option-label">Size</label>
            <div class="size-options" id="sizesContainer"></div>
          </div>

          <div class="option-group">
            <label class="option-label">Color</label>
            <div class="color-options" id="colorsContainer"></div>
          </div>

          <div class="out-of-stock" id="outOfStockMsg">
            <span>Out of Stock</span>
          </div>

          <div class="quantity-section">
            <label class="option-label">Quantity</label>
            <div class="quantity-selector">
              <button class="quantity-btn" id="decreaseQty" data-action="decrease-qty">-</button>
              <input type="number" id="quantityInput" value="1" min="1" max="99" readonly>
              <button class="quantity-btn" id="increaseQty" data-action="increase-qty">+</button>
            </div>
          </div>

          <div class="buy-section">
            <button id="buyBtn" class="buy-btn hover-lift btn-pulse" data-action="buy-now">
              Buy Now
            </button>
            <button id="addCartBtn" class="add-cart-btn hover-lift" data-action="add-to-cart">
              <i class="ri-shopping-cart-add-line"></i> Add to Cart
            </button>
            <button id="wishlistBtn" class="wishlist-btn hover-lift" data-action="toggle-wishlist" title="Add to Wishlist">
              <i class="ri-heart-line" id="wishlistIcon"></i>
            </button>
          </div>
        </div>
      </div>
    `;

    container.innerHTML = html;
    
    // Trigger animations
    if (window.observeElements) {
        window.observeElements();
    } else {
        // Fallback if main.js hasn't loaded or doesn't have the helper
        const el = container.querySelector('.animate-fade-up');
        if (el) {
            setTimeout(() => el.classList.add('visible'), 100);
        }
    }

    // Initialize product details
    initializeProduct(p);
    
    // Check wishlist status for this product
    checkWishlistStatus();
    
    // Attach event listeners for buttons
    attachProductEventListeners();
  }

  function initializeProduct(p) {
    const mainImage = document.getElementById('mainImage');
    const thumbsContainer = document.getElementById('thumbsContainer');
    const sizesContainer = document.getElementById('sizesContainer');
    const colorsContainer = document.getElementById('colorsContainer');
    const buyBtn = document.getElementById('buyBtn');
    const outOfStockMsg = document.getElementById('outOfStockMsg');

    // Thumbnails (max 6) - clear container then render with FAST loading
    if (thumbsContainer) {
      thumbsContainer.innerHTML = '';
      const thumbImages = (p.thumbImages && p.thumbImages.length) ? p.thumbImages.slice(0, 6) : (p.images ? p.images.slice(0, 6) : []);

      if (thumbImages.length === 0) {
        // show a small placeholder if no thumbnails available
        const placeholder = document.createElement('div');
        placeholder.className = 'thumbnail active';
        placeholder.innerHTML = `<img src="${getPlaceholder(95,95,'No Image')}" alt="${p.name}">`;
        thumbsContainer.appendChild(placeholder);
      } else {
        // Preload all thumbnail images for instant display
        thumbImages.forEach(src => {
          const link = document.createElement('link');
          link.rel = 'preload';
          link.as = 'image';
          link.href = src;
          document.head.appendChild(link);
        });
        
        thumbImages.forEach((src, i) => {
          const thumb = document.createElement('div');
          thumb.className = `thumbnail ${i === 0 ? 'active' : ''}`;
          const img = document.createElement('img');
          img.src = src;
          img.alt = `${p.name} ${i + 1}`;
          img.loading = 'eager';
          img.fetchPriority = 'high';
          thumb.appendChild(img);
          thumb.addEventListener('click', () => {
            if (mainImage) mainImage.src = src;
            // Update currentImageIndex for arrow navigation sync
            if (typeof currentImageIndex !== 'undefined') {
              currentImageIndex = i;
              // Update arrow button states
              const prevBtn = document.getElementById('imgNavPrev');
              const nextBtn = document.getElementById('imgNavNext');
              const counter = document.getElementById('imageCounter');
              if (prevBtn) prevBtn.disabled = i === 0;
              if (nextBtn) nextBtn.disabled = i === productImages.length - 1;
              if (counter) counter.textContent = `${i + 1} / ${productImages.length}`;
            }
            document.querySelectorAll('.thumbnail').forEach(t => t.classList.remove('active'));
            thumb.classList.add('active');
          });
          thumbsContainer.appendChild(thumb);
        });
      }
    }

    // Sizes - show all but mark unavailable as out of stock
    p.sizes.forEach((size, i) => {
      const btn = document.createElement('button');
      const isAvailable = p.availableSizes && p.availableSizes.includes(size);
      btn.className = `size-option ${i === 0 && isAvailable ? 'selected' : ''} ${!isAvailable ? 'out-of-stock-option' : ''}`;
      btn.textContent = size;
      btn.type = 'button';
      btn.title = isAvailable ? size : `${size} - Out of Stock`;
      btn.addEventListener('click', () => {
        document.querySelectorAll('.size-option').forEach(b => b.classList.remove('selected'));
        btn.classList.add('selected');
        selectedSize = size;
        window.globalSelectedSize = size;
        updateStockStatus();
      });
      sizesContainer.appendChild(btn);
    });
    // Select first available size
    const firstAvailableSize = p.sizes.find(s => p.availableSizes && p.availableSizes.includes(s)) || p.sizes[0];
    selectedSize = firstAvailableSize;
    window.globalSelectedSize = firstAvailableSize;
    // Mark first available as selected
    const sizeButtons = sizesContainer.querySelectorAll('.size-option');
    sizeButtons.forEach(btn => {
      if (btn.textContent === firstAvailableSize) {
        btn.classList.add('selected');
      }
    });

    // Colors - show all but mark unavailable as out of stock
    p.colors.forEach((color, i) => {
      const btn = document.createElement('div');
      const isAvailable = p.availableColors && p.availableColors.includes(color);
      btn.className = `color-option ${i === 0 && isAvailable ? 'selected' : ''} ${!isAvailable ? 'out-of-stock-option' : ''}`;
      btn.style.background = color;
      btn.title = isAvailable ? '' : 'Out of Stock';
      btn.addEventListener('click', () => {
        document.querySelectorAll('.color-option').forEach(b => {
          b.classList.remove('selected');
          // Remove faded style from all
          b.style.opacity = 1;
        });
        btn.classList.add('selected');
        selectedColor = color;
        window.globalSelectedColor = color;
        updateStockStatus();
        // If not available, show out of stock message and fade selected
        if (!isAvailable) {
          outOfStockMsg.style.display = 'flex';
          btn.style.opacity = 0.5;
        } else {
          outOfStockMsg.style.display = 'none';
          btn.style.opacity = 1;
        }
      });
      colorsContainer.appendChild(btn);
    });
    // Select first available color
    const firstAvailableColor = p.colors.find(c => p.availableColors && p.availableColors.includes(c)) || p.colors[0];
    selectedColor = firstAvailableColor;
    window.globalSelectedColor = firstAvailableColor;
    // Mark first available as selected
    const colorButtons = colorsContainer.querySelectorAll('.color-option');
    colorButtons.forEach((btn, idx) => {
      if (p.colors[idx] === firstAvailableColor) {
        btn.classList.add('selected');
      }
    });

    // Function to check if current selection is in stock
    function updateStockStatus() {
      const sizeInStock = p.availableSizes && p.availableSizes.includes(selectedSize);
      const colorInStock = p.availableColors && p.availableColors.includes(selectedColor);
      const isInStock = sizeInStock && colorInStock && !p.isOutOfStock;
      
      if (isInStock) {
        outOfStockMsg.style.display = 'none';
        buyBtn.disabled = false;
        buyBtn.style.opacity = '1';
        document.getElementById('addCartBtn').disabled = false;
        document.getElementById('addCartBtn').style.opacity = '1';
      } else {
        outOfStockMsg.style.display = 'flex';
        buyBtn.disabled = true;
        buyBtn.style.opacity = '0.5';
        document.getElementById('addCartBtn').disabled = true;
        document.getElementById('addCartBtn').style.opacity = '0.5';
      }
    }

    // Store current product globally
    p.productIndex = products.indexOf(p);
    window.globalCurrentProduct = p;

    // Main image zoom on hover
    mainImage.addEventListener('mouseenter', () => mainImage.classList.add('zoomed'));
    mainImage.addEventListener('mouseleave', () => mainImage.classList.remove('zoomed'));

    // Initial setup - check stock status
    updateStockStatus();

    // Add to Cart button handler
    const addCartBtn = document.getElementById('addCartBtn');
    if (addCartBtn) {
      addCartBtn.addEventListener('click', async () => {
        if (!selectedSize) {
          showToast('Please select a size', 'warning');
          return;
        }
        if (!selectedColor) {
          showToast('Please select a color', 'warning');
          return;
        }

        // Check if selected size/color is in stock
        const sizeInStock = p.availableSizes && p.availableSizes.includes(selectedSize);
        const colorInStock = p.availableColors && p.availableColors.includes(selectedColor);
        if (!sizeInStock || !colorInStock) {
          showToast('Sorry, this combination is out of stock. Please select a different size or color.', 'error');
          return;
        }

        // Get selected quantity
        const quantity = parseInt(document.getElementById('quantityInput').value) || 1;

        // Create cart item with proper image and price from product
        const cartItem = {
          id: p.id || (p.name + '_' + Date.now()),
          productId: p.id,
          productIndex: products.indexOf(p),
          name: p.name,
          price: p.price || 999,
          selectedSize: selectedSize,
          selectedColor: selectedColor,
          image: p.images[0] || p.image || getPlaceholder(200,200,'Product'),
          thumbImage: p.thumbImage || p.images[0] || p.image,
          thumbImages: p.thumbImages || [],
          quantity: quantity
        };

        // Add to cart via API
        try {
          const result = await API.cart.add(cartItem);
          
          if (result.requiresLogin) {
            showToast('Please login to add items to cart', 'warning');
            window.location.href = 'login.html?redirect=' + encodeURIComponent(window.location.href);
            return;
          }
          
          if (result.success) {
            showToast('Item added to cart successfully!', 'success');
            // Update cart count in real-time
            const cartCount = document.getElementById('cartCount');
            if (cartCount && result.cart) {
              const totalQuantity = result.cart.reduce((sum, item) => sum + item.quantity, 0);
              cartCount.textContent = totalQuantity;
              if (totalQuantity > 0) {
                cartCount.classList.add('show');
              } else {
                cartCount.classList.remove('show');
              }
              // Add animation effect to cart icon
              const cartIcon = document.getElementById('cartIcon');
              if (cartIcon) {
                cartIcon.style.animation = 'none';
                setTimeout(() => {
                  cartIcon.style.animation = 'cartPulse 0.5s ease';
                }, 10);
              }
            }

            // Change button text temporarily to show feedback
            const originalText = addCartBtn.innerHTML;
            addCartBtn.innerHTML = '<i class="ri-check-line"></i> Added!';
            addCartBtn.style.background = '#4caf50';
            addCartBtn.style.borderColor = '#4caf50';
            addCartBtn.style.color = '#fff';

            setTimeout(() => {
              addCartBtn.innerHTML = originalText;
              addCartBtn.style.background = '';
              addCartBtn.style.borderColor = '';
              addCartBtn.style.color = '';
            }, 1500);
          } else {
            throw new Error(result.error || 'Failed to add to cart');
          }
        } catch (error) {
          console.error('Add to cart failed:', error);
          if (error.message === 'NOT_AUTHENTICATED' || (error.message && error.message.includes('401'))) {
            showToast('Please login to add items to cart', 'warning');
            window.location.href = 'login.html?redirect=' + encodeURIComponent(window.location.href);
          } else {
            showToast('Failed to add to cart: ' + (error.message || 'Please try again'), 'error');
          }
        }
      });
    }

    // Note: individual size/color buttons already call updateStockStatus() on click.
    // Removed redundant document-level handler that called an undefined updateBuyButton().
  }

  function checkOutOfStock(productIndex, color) {
    const outOfStockMsg = document.getElementById('outOfStockMsg');
    
    // Product 0 (Premium Jacket): Show if color is NOT black
    if (productIndex === 0) {
      if (color !== '#000') {
        outOfStockMsg.classList.add('show');
      } else {
        outOfStockMsg.classList.remove('show');
      }
    }
    // Product 3 (Tailored Coat): Show if color is NOT red and NOT blue
    else if (productIndex === 3) {
      if (color !== '#dc2626' && color !== '#0b85c9') {
        outOfStockMsg.classList.add('show');
      } else {
        outOfStockMsg.classList.remove('show');
      }
    }
    // All other products (1, 2, 4, 5): always show out of stock
    else {
      outOfStockMsg.classList.add('show');
    }
  }

  // ========================================
  // IMAGE NAVIGATION LOGIC (SCRATCH REBUILD)
  // ========================================
  let currentImageIndex = 0;
  let productImages = [];

  const updateMainImage = () => {
    const mainImg = document.getElementById('mainImage');
    const counter = document.getElementById('imageCounter');
    const prevBtn = document.getElementById('imgNavPrev');
    const nextBtn = document.getElementById('imgNavNext');
    
    if (!mainImg || productImages.length === 0) return;
    
    // Smooth transition
    mainImg.classList.add('changing');
    
    setTimeout(() => {
      mainImg.src = productImages[currentImageIndex];
      // Fade back in when source is updated
      mainImg.onload = () => mainImg.classList.remove('changing');
      // Safety timeout
      setTimeout(() => mainImg.classList.remove('changing'), 250);
    }, 120);
    
    // Update labels and states
    if (counter) counter.textContent = `${currentImageIndex + 1} / ${productImages.length}`;
    if (prevBtn) prevBtn.disabled = currentImageIndex === 0;
    if (nextBtn) nextBtn.disabled = currentImageIndex === productImages.length - 1;
    
    // Thumbnails sync
    document.querySelectorAll('.thumbnail').forEach((thumb, idx) => {
      thumb.classList.toggle('active', idx === currentImageIndex);
    });
  };

  const navigateImage = (direction) => {
    if (direction === 'prev' && currentImageIndex > 0) {
      currentImageIndex--;
      updateMainImage();
    } else if (direction === 'next' && currentImageIndex < productImages.length - 1) {
      currentImageIndex++;
      updateMainImage();
    }
  };

  // Extension for the main renderProduct function
  const originalRenderProduct = renderProduct;
  renderProduct = function(index) {
    // Call the base render
    originalRenderProduct(index);
    
    const p = products[index];
    const container = document.getElementById('productDetailsContainer');
    productImages = p.images || [];
    currentImageIndex = 0;
    
    const imageArea = container.querySelector('.main-image-wrap');
    if (imageArea && productImages.length > 1) {
      // Clean start for arrows
      if (!imageArea.querySelector('.image-nav-arrow')) {
        // Prev button
        const btnPrev = document.createElement('button');
        btnPrev.className = 'image-nav-arrow prev';
        btnPrev.id = 'imgNavPrev';
        btnPrev.innerHTML = '<i class="ri-arrow-left-s-line"></i>';
        btnPrev.disabled = true;
        btnPrev.onclick = (e) => { e.stopPropagation(); navigateImage('prev'); };
        
        // Next button
        const btnNext = document.createElement('button');
        btnNext.className = 'image-nav-arrow next';
        btnNext.id = 'imgNavNext';
        btnNext.innerHTML = '<i class="ri-arrow-right-s-line"></i>';
        btnNext.onclick = (e) => { e.stopPropagation(); navigateImage('next'); };
        
        // Image counter
        const imgCounter = document.createElement('div');
        imgCounter.className = 'image-counter';
        imgCounter.id = 'imageCounter';
        imgCounter.textContent = `1 / ${productImages.length}`;
        
        imageArea.appendChild(btnPrev);
        imageArea.appendChild(btnNext);
        imageArea.appendChild(imgCounter);
      }
      
      // Global keys
      document.onkeydown = (e) => {
        if (e.key === 'ArrowLeft') navigateImage('prev');
        if (e.key === 'ArrowRight') navigateImage('next');
      };
    }

    // Thumbnail specific handlers
    container.querySelectorAll('.thumbnail').forEach((t, i) => {
      t.style.cursor = 'pointer';
      t.onclick = () => { 
        currentImageIndex = i; 
        updateMainImage(); 
      };
    });
  };

  // Header show/hide on scroll
  (() => {
    const header = document.querySelector('.nav');
    if (!header) return;

    let lastY = window.scrollY || 0;
    const tolerance = 10;
    const hideOffset = 80;

    const onScroll = () => {
      const y = window.scrollY || 0;

      if (y >= 50) header.classList.add('nav-scrolled');
      else header.classList.remove('nav-scrolled');

      const delta = y - lastY;

      if (Math.abs(delta) > tolerance) {
        if (delta > 0 && y > hideOffset) {
          header.classList.add('nav-hidden');
        } else if (delta < 0) {
          header.classList.remove('nav-hidden');
        }
      }

      lastY = y;
    };

    window.addEventListener('scroll', onScroll, { passive: true });
  })();

  // Force footer visibility on products page
  const footer = document.querySelector('.footer');
  if (footer) {
    footer.style.opacity = '1';
    footer.style.visibility = 'visible';
    footer.style.display = 'grid';
  }
</script>

    <!-- Terms & Conditions Modal -->
    <div id="termsConditionsModal" class="modal-policy">
      <div class="modal-content-policy">
        <span class="modal1close">✕</span>
        <h2>Terms & Conditions</h2>
        <p class="policy-intro">Each creation that bears our name is more than fabric and thread — it is an embodiment of artistry.</p>
        
        <div class="policy-section">
          <p class="policy-content">By accessing and using this website, you accept and agree to be bound by the terms and provision of this agreement. We reserve the right to make changes to these terms at any time. Your continued use of this website following the posting of revised Terms means that you accept and agree to the changes.</p>
          <button class="read-more-btn" onclick="toggleExpand(this)">Read More</button>
          <div class="policy-expanded-content">
            <p class="policy-content">All content on this website is proprietary or licensed to BLACKONN and is protected by international copyright laws. Reproduction, distribution, or transmission of content without written permission is prohibited. Product images and descriptions are for illustrative purposes only. Actual colors may vary due to screen settings and lighting conditions. We strive for accuracy but do not warrant that product information is error-free.</p>
          </div>
        </div>
      </div>
    </div>

    <!-- Contact Popup Modal -->
    <div id="contactModal1" class="modal1">
      <div class="modal-content1">
        <span class="modal1close">✕</span>
        <h2>Contact Information</h2>
        <p><strong>Email:</strong><a href="mailto:hello@blackonn.com" style="color: rgb(59, 57, 57);"> hello@blackonn.com</a></p>
        <p><strong>Phone:</strong><a href="tel:+918420889722" style="color: rgb(59, 57, 57);"> +91 8420889722</a></p>
        <p><strong>Address:</strong><a style="color: rgb(59, 57, 57);"> Kolkata, West Bengal</a></p>
      </div>
    </div>

    <!-- Policy Modals (Large - Match Product Modal Size) -->
    <div id="returnPolicyModal" class="modal-policy">
      <div class="modal-content-policy">
        <span class="modal1close">✕</span>
        <h2>Return Policy</h2>
        <p class="policy-intro">Each creation that bears our name is more than fabric and thread — it is an embodiment of artistry.</p>
        
        <div class="policy-section">
          <p class="policy-content">We strive to accept returns within 7 days of delivery for unworn, unaltered items with original tags.</p>
          <button class="read-more-btn" onclick="toggleExpand(this)">Read More</button>
          <div class="policy-expanded-content">
            <p class="policy-content">Eligible items must be in original condition with all packaging intact. Once we receive your return, processing typically takes 7-10 business days. Please note that original shipping costs are non-refundable.</p>
          </div>
        </div>
      </div>
    </div>

    <div id="shippingModal" class="modal-policy">
      <div class="modal-content-policy">
        <span class="modal1close">✕</span>
        <h2>Shipping & Delivery</h2>
        <p class="policy-intro">Each creation that bears our name is more than fabric and thread — it is an embodiment of artistry.</p>
        
        <div class="policy-section">
          <p class="policy-content">We offer worldwide shipping with estimated delivery times of 5-10 business days. Track your order in real-time through our portal.</p>
          <button class="read-more-btn" onclick="toggleExpand(this)">Read More</button>
          <div class="policy-expanded-content">
            <p class="policy-content">Standard shipping is available for most destinations. Express shipping (2-3 days) is available for select regions. All packages are insured and require a signature upon delivery.</p>
          </div>
        </div>
      </div>
    </div>

    <div id="refundModal" class="modal-policy">
      <div class="modal-content-policy">
        <span class="modal1close">✕</span>
        <h2>Refund Policy</h2>
        <p class="policy-intro">Each creation that bears our name is more than fabric and thread — it is an embodiment of artistry.</p>
        
        <div class="policy-section">
          <p class="policy-content">Refunds are processed within 7-10 business days of return receipt. Original shipping costs are non-refundable.</p>
          <button class="read-more-btn" onclick="toggleExpand(this)">Read More</button>
          <div class="policy-expanded-content">
            <p class="policy-content">Once your return is verified, we will initiate the refund to your original payment method. Refunds may take an additional 3-5 business days to appear in your account depending on your bank.</p>
          </div>
        </div>
      </div>
    </div>

    <div id="cancellationModal" class="modal-policy">
      <div class="modal-content-policy">
        <span class="modal1close">✕</span>
        <h2>Cancellation Policy</h2>
        <p class="policy-intro">Each creation that bears our name is more than fabric and thread — it is an embodiment of artistry.</p>
        
        <div class="policy-section">
          <p class="policy-content">Orders can be cancelled within 24 hours of purchase. After that, they move to production and cannot be cancelled.</p>
          <button class="read-more-btn" onclick="toggleExpand(this)">Read More</button>
          <div class="policy-expanded-content">
            <p class="policy-content">To cancel your order, contact our support team immediately with your order number. If cancellation is requested after production has begun, you may be responsible for a cancellation fee.</p>
          </div>
        </div>
      </div>
    </div>

    <div id="paymentModal" class="modal-policy">
      <div class="modal-content-policy">
        <span class="modal1close">✕</span>
        <h2>Payment Policy</h2>
        <p class="policy-intro">Each creation that bears our name is more than fabric and thread — it is an embodiment of artistry.</p>
        
        <div class="policy-section">
          <p class="policy-content">We accept all major credit cards, debit cards, and digital wallets. Payments are secure and encrypted.</p>
          <button class="read-more-btn" onclick="toggleExpand(this)">Read More</button>
          <div class="policy-expanded-content">
            <p class="policy-content">Your payment information is processed through industry-leading secure payment gateways. We use SSL encryption to protect your data. All transactions are verified for fraud prevention.</p>
          </div>
        </div>
      </div>
    </div>

    <div id="privacyModal" class="modal-policy">
      <div class="modal-content-policy">
        <span class="modal1close">✕</span>
        <h2>Privacy Policy</h2>
        <p class="policy-intro">Each creation that bears our name is more than fabric and thread — it is an embodiment of artistry.</p>
        
        <div class="policy-section">
          <p class="policy-content">We respect your privacy and do not share your personal information with third parties. Your data is protected and secure.</p>
          <button class="read-more-btn" onclick="toggleExpand(this)">Read More</button>
          <div class="policy-expanded-content">
            <p class="policy-content">We collect only essential information for order fulfillment and communication. Your email and contact details are never sold or shared. You can request data deletion at any time by contacting our support team.</p>
          </div>
        </div>
      </div>
    </div>

    <script>
      // Toggle expand/collapse for policy Read More buttons - expands modal and content
      function toggleExpand(btn) {
        const content = btn.nextElementSibling;
        const modal = btn.closest('.modal-content-policy');
        const isExpanded = btn.classList.contains('expanded');
        
        btn.classList.toggle('expanded');
        content.classList.toggle('show');
        
        // Toggle button text and position
        if (!isExpanded) {
          // Expanding: hide Read More, show Read Less at end
          btn.style.display = 'none';
          const readLessBtn = document.createElement('button');
          readLessBtn.className = 'read-less-btn';
          readLessBtn.innerHTML = 'Read Less ▲';
          readLessBtn.onclick = function() { toggleExpand(btn); };
          content.appendChild(readLessBtn);
          
          // Expand modal
          modal.style.maxHeight = 'none';
          modal.style.height = 'auto';
        } else {
          // Collapsing: show Read More, hide Read Less
          btn.style.display = 'inline-flex';
          const readLessBtn = content.querySelector('.read-less-btn');
          if (readLessBtn) readLessBtn.remove();
          
          // Collapse modal
          modal.style.maxHeight = '92vh';
          modal.style.height = 'auto';
        }
      }

      const contactModal1 = document.getElementById('contactModal1');
      const trigger = document.getElementById('contactTrigger');
      const closebtn = contactModal1 ? contactModal1.querySelector('.modal1close') : null;

      if (trigger) {
        trigger.addEventListener('click', (ev) => {
          ev.preventDefault();
          contactModal1.style.display = 'flex';
          document.body.style.overflow = 'hidden';
        });
      }
      
      if (closebtn) {
        closebtn.addEventListener('click', () => {
          contactModal1.style.animation = 'modal1FadeOut 0.3s ease-in forwards';
          contactModal1.querySelector('.modal-content1').style.animation = 'popSlideDown 0.3s ease-in forwards';
          setTimeout(() => {
            contactModal1.style.display = 'none';
            contactModal1.style.animation = '';
            contactModal1.querySelector('.modal-content1').style.animation = '';
            document.body.style.overflow = '';
          }, 300);
        });
      }
      
      window.addEventListener('click', (e) => {
        if (e.target === contactModal1) {
          contactModal1.style.animation = 'modal1FadeOut 0.3s ease-in forwards';
          contactModal1.querySelector('.modal-content1').style.animation = 'popSlideDown 0.3s ease-in forwards';
          setTimeout(() => {
            contactModal1.style.display = 'none';
            contactModal1.style.animation = '';
            contactModal1.querySelector('.modal-content1').style.animation = '';
            document.body.style.overflow = '';
          }, 300);
        }
      });

      // Policy modal handlers (Return, Shipping, Refund, Cancellation, Payment, Privacy)
      const policyModals = [
        { modalId: 'returnPolicyModal', triggerId: 'returnPolicyTrigger' },
        { modalId: 'shippingModal', triggerId: 'shippingTrigger' },
        { modalId: 'refundModal', triggerId: 'refundTrigger' },
        { modalId: 'cancellationModal', triggerId: 'cancellationTrigger' },
        { modalId: 'paymentModal', triggerId: 'paymentTrigger' },
        { modalId: 'privacyModal', triggerId: 'privacyTrigger' },
        { modalId: 'termsConditionsModal', triggerId: 'termsConditionsTrigger' }
      ];

      policyModals.forEach(({ modalId, triggerId }) => {
        const modal = document.getElementById(modalId);
        const trigger = document.getElementById(triggerId);

        if (trigger && modal) {
          trigger.addEventListener('click', (ev) => {
            ev.preventDefault();
            modal.style.display = 'flex';
            document.body.style.overflow = 'hidden';
          });

          const closeBtn = modal.querySelector('.modal1close');
          if (closeBtn) {
            closeBtn.addEventListener('click', () => {
              modal.style.animation = 'modal1FadeOut 0.3s ease-in forwards';
              modal.querySelector('.modal-content-policy').style.animation = 'popSlideDown 0.3s ease-in forwards';
              setTimeout(() => {
                modal.style.display = 'none';
                modal.style.animation = '';
                modal.querySelector('.modal-content-policy').style.animation = '';
                document.body.style.overflow = '';
              }, 300);
            });
          }

          window.addEventListener('click', (e) => {
            if (e.target === modal) {
              modal.style.animation = 'modal1FadeOut 0.3s ease-in forwards';
              modal.querySelector('.modal-content-policy').style.animation = 'popSlideDown 0.3s ease-in forwards';
              setTimeout(() => {
                modal.style.display = 'none';
                modal.style.animation = '';
                modal.querySelector('.modal-content-policy').style.animation = '';
                document.body.style.overflow = '';
              }, 300);
            }
          });
        }
      });
    </script>

    <!-- Social Sharing Functions -->
    <script>
      // Get current product information for sharing
      function getCurrentProductInfo() {
        // Use globally available currentProduct or fallback
        const product = window.globalCurrentProduct || {
          name: 'BLACKONN Product',
          price: 999
        };

        return {
          name: product.name,
          price: '₹' + product.price,
          url: window.location.href
        };
      }

      // Facebook Share
      function shareOnFacebook() {
        const product = getCurrentProductInfo();
        const shareUrl = `https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(product.url)}&quote=${encodeURIComponent(`Check out this amazing ${product.name} from BLACKONN! ${product.price}`)}`;
        window.open(shareUrl, '_blank', 'noopener,noreferrer,width=600,height=400');
      }

      // Twitter Share
      function shareOnTwitter() {
        const product = getCurrentProductInfo();
        const tweetText = `Check out this amazing ${product.name} from BLACKONN! ${product.price} ${product.url}`;
        const shareUrl = `https://twitter.com/intent/tweet?text=${encodeURIComponent(tweetText)}`;
        window.open(shareUrl, '_blank', 'noopener,noreferrer,width=600,height=400');
      }

      // WhatsApp Share
      function shareOnWhatsApp() {
        const product = getCurrentProductInfo();
        const message = `Check out this amazing ${product.name} from BLACKONN! ${product.price}\n\n${product.url}`;
        const shareUrl = `https://wa.me/?text=${encodeURIComponent(message)}`;
        window.open(shareUrl, '_blank', 'noopener,noreferrer');
      }

      // Instagram Share (copies link and prompts user to share)
      function shareOnInstagram() {
        const product = getCurrentProductInfo();
        navigator.clipboard.writeText(product.url).then(() => {
          // Show feedback
          const instagramBtn = document.getElementById('shareOnInstagramBtn');
          const originalText = instagramBtn.innerHTML;
          instagramBtn.innerHTML = '<i class="ri-check-line"></i><span>Link Copied!</span>';
          instagramBtn.style.color = '#E4405F';
          
          // Open Instagram app or website
          setTimeout(() => {
            window.open('https://www.instagram.com/', '_blank', 'noopener,noreferrer');
          }, 500);

          setTimeout(() => {
            instagramBtn.innerHTML = originalText;
            instagramBtn.style.color = '';
          }, 2500);
          
          // Show notification
          if (typeof showNotification === 'function') {
            showNotification('Link copied! Paste it in your Instagram story or post.', 'success');
          }
        }).catch(err => {
          console.error('Failed to copy: ', err);
          // Just open Instagram
          window.open('https://www.instagram.com/', '_blank', 'noopener,noreferrer');
        });
      }

      // Copy Link
      function copyLink() {
        const product = getCurrentProductInfo();
        navigator.clipboard.writeText(product.url).then(() => {
          // Show feedback
          const copyBtn = document.querySelector('.copy-btn');
          const originalText = copyBtn.innerHTML;
          copyBtn.innerHTML = '<i class="ri-check-line"></i><span>Copied!</span>';
          copyBtn.style.background = '#10b981';
          copyBtn.style.color = '#ffffff';

          setTimeout(() => {
            copyBtn.innerHTML = originalText;
            copyBtn.style.background = '';
            copyBtn.style.color = '';
          }, 2000);
        }).catch(err => {
          console.error('Failed to copy: ', err);
          // Fallback for older browsers
          const textArea = document.createElement('textarea');
          textArea.value = product.url;
          document.body.appendChild(textArea);
          textArea.select();
          document.execCommand('copy');
          document.body.removeChild(textArea);

          const copyBtn = document.querySelector('.copy-btn');
          const originalText = copyBtn.innerHTML;
          copyBtn.innerHTML = '<i class="ri-check-line"></i><span>Copied!</span>';
          copyBtn.style.background = '#10b981';
          copyBtn.style.color = '#ffffff';

          setTimeout(() => {
            copyBtn.innerHTML = originalText;
            copyBtn.style.background = '';
            copyBtn.style.color = '';
          }, 2000);
        });
      }
      
      // Attach event listeners for share buttons
      document.addEventListener('DOMContentLoaded', function() {
        const facebookBtn = document.getElementById('shareOnFacebookBtn');
        const twitterBtn = document.getElementById('shareOnTwitterBtn');
        const whatsappBtn = document.getElementById('shareOnWhatsAppBtn');
        const instagramBtn = document.getElementById('shareOnInstagramBtn');
        const copyBtn = document.getElementById('copyLinkBtn');
        
        if (facebookBtn) facebookBtn.addEventListener('click', shareOnFacebook);
        if (twitterBtn) twitterBtn.addEventListener('click', shareOnTwitter);
        if (whatsappBtn) whatsappBtn.addEventListener('click', shareOnWhatsApp);
        if (instagramBtn) instagramBtn.addEventListener('click', shareOnInstagram);
        if (copyBtn) copyBtn.addEventListener('click', copyLink);
      });
    </script>

    <!-- 🚀 NEXT-GENERATION ADVANCED SYSTEMS -->
    <!-- Real-time & Communication -->
    <script src="assets/js/realtime-manager.js"></script>

    <!-- Security & Error Tracking -->
    <script src="assets/js/security-manager.js"></script>
    <script src="assets/js/error-tracker.js"></script>

    <!-- Machine Learning & Personalization -->
    <script src="assets/js/ml-engine.js"></script>

    <!-- User Experience -->
    <script src="assets/js/form-manager.js"></script>
    <script src="assets/js/image-optimizer.js"></script>
    <script src="assets/js/i18n-manager.js"></script>

    <!-- Experimentation -->
    <script src="assets/js/ab-testing.js"></script>

    <script src="assets/js/advanced-cache.js"></script>
    <script src="assets/js/state-manager.js"></script>
    <script src="assets/js/performance-optimizer.js"></script>
    <script src="assets/js/scrollreveal.min.js"></script>

    <!-- 🌟 WORLD-FIRST CUTTING-EDGE TECHNOLOGIES -->
    <!-- AI & Biometrics -->
    <script src="assets/js/emotion-ai.js"></script>
    <script src="assets/js/biometric-auth.js"></script>
    
    <!-- Future Tech -->
    <script src="assets/js/neural-commerce.js"></script>

    <script src="assets/js/swiper-bundle.min.js"></script>
    <script src="assets/js/main.js"></script>
    <script src="assets/js/ai-analytics.js"></script>

    <!-- Auth is already loaded via api.js at top, these are duplicates - removed -->
    <script src="assets/js/security.js"></script>
    <script src="assets/js/console-block.js"></script>
    <script src="assets/js/auto-debugger.js"></script>
    <script src="assets/js/analytics.js"></script>
  </body>
</html>
